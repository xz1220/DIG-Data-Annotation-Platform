webpackJsonp([1],{"0fck":function(e,t){},"2gkA":function(e,t){},"4TzI":function(e,t,a){"use strict";t.a=function(e,t,a,i,n,s,l){var o=new function(){var e={panel:document.querySelector(".label-sign"),submit:document.querySelector(".label-sign-submit"),cancel:document.querySelector(".label-sign-cancel"),text:document.querySelector(".label-sign-text"),selector:document.querySelector(".label-sign-selector"),question:document.querySelector(".label-sign-question")},t=void 0;return this.load=function(a,i,n){if(i=+i.toFixed(2),n=+n.toFixed(2),0==a.type?e.question.innerHTML="è¯·è¾“å…¥æè¿°":1==a.type?e.question.innerHTML="è¯·å¡«ç©ºæˆ–æ¸…ç©ºè¾“å…¥æè¿°":e.question.innerHTML=a.question.replace("$","___"),1==a.type?e.text.value=a.question.replace("$","___"):e.text.value="",2==a.type){e.selector.innerHTML="";var s=!0,l=!1,o=void 0;try{for(var c,u=a.selector[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value,f=document.createElement("option");f.value=d,f.innerHTML=d,e.selector.appendChild(f)}}catch(e){l=!0,o=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw o}}e.selector.style.display="initial",e.text.value=a.question.replace("$",a.selector[0])}else e.selector.style.display="none";return e.panel.style.display="flex",t=a,new Promise(function(t,a){var s=function a(){console.log('Add mark "'+e.text.value+'" at '+i+" to "+n),r.add((new Date).getTime(),i,n,e.text.value),e.submit.removeEventListener("click",a),e.cancel.removeEventListener("click",l),e.panel.style.display="none",t(e.text.value)},l=function t(){e.submit.removeEventListener("click",s),e.cancel.removeEventListener("click",t),e.panel.style.display="none",a(e.text.value)};e.submit.addEventListener("click",s),e.cancel.addEventListener("click",l)})},e.selector.addEventListener("change",function(){e.text.value=t.question.replace("$",e.selector.options[e.selector.selectedIndex].value)}),this},r=new function(e,a){var i=[],n=document.querySelector(".label-list-ul"),s=function(){e.showMark(+this.getAttribute("data-start"),+this.getAttribute("data-end"))},l=function(){e.hideMark()},o=function(e,a,o,r){i.push({labelId:t.labelId,type:0,startTime:a,endTime:o,sentence:r});var c=document.createElement("div");c.innerHTML=' <li class="label-video-list-item">\n            <div class="label-list-header"><span>'+a+"</span><span>"+o+'</span></div>\n            <div class="label-list-content">\n                '+r+'\n            </div>\n            <div class="label-list-options">\n                <span data-id="'+e+'" class="iconfont icon-shanchu label-list-delete  label-video-btn"></span>\n                <span data-start="'+a+'" data-end="'+o+'" class="iconfont icon-kejian label-list-visible label-video-btn"></span>\n            </div>\n        </li>',c.children[0].querySelector(".label-list-visible").addEventListener("mouseenter",s),c.children[0].querySelector(".label-list-visible").addEventListener("mouseleave",l),c.children[0].querySelector(".label-list-delete").addEventListener("click",function(){for(var e=0;e<i.length;e++){var t=i[e];t.startTime==a&&t.endTime==o&&t.sentence==r&&i.splice(e,1)}this.parentElement.parentElement.remove()}),n.appendChild(c.children[0])};this.add=o,this.save=function(){return i};var r=function(e){console.log(e),i=[],n.innerHTML="";var t=!0,a=!1,s=void 0;try{for(var l,r=e[Symbol.iterator]();!(t=(l=r.next()).done);t=!0){var c=l.value;o((new Date).getTime(),c.startTime,c.endTime,c.sentence)}}catch(e){a=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw s}}};return r(a),this.reload=function(t,a){e.reload(a),r(t)},this}(new e(document.querySelector(".label-video"),i,function(e,a){return console.log(t),new Promise(function(i,n){o.load(t,e,a).then(function(e){i(e)}).catch(function(e){n(e)})})},n,l,s),a);return r}},EwH0:function(e,t,a){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=function(e,t,a,n,s,l){var o={frame:e.querySelector(".bfplayer"),main:e.querySelector(".bf-main"),video:e.querySelector(".bf-video"),controller:e.querySelector(".bf-controller"),menu:e.querySelector(".bf-menu"),loading:e.querySelector(".bf-loading-panel"),capture:{panel:e.querySelector(".bf-capture"),start:e.querySelector(".bf-btn-start"),end:e.querySelector(".bf-btn-end")},pgb:{panel:e.querySelector(".bf-pgb-player"),buffer:e.querySelector(".bf-pgb-buffer"),played:e.querySelector(".bf-pgb-played"),select:e.querySelector(".bf-pgb-select"),point:e.querySelector(".bf-pgb-point"),img:e.querySelector(".bf-pgb-point>div")},btn:{play:e.querySelector(".bf-btn-play"),fullbrowser:e.querySelector(".bf-btn-fullbrowser"),fullscreen:e.querySelector(".bf-btn-fullscreen"),volume:e.querySelector(".bf-btn-volume"),save:e.querySelector(".bf-btn-save"),previous:e.querySelector(".bf-btn-previous"),next:e.querySelector(".bf-btn-next")},panel:{volume:{area:e.querySelector(".bf-volume-area"),panel:e.querySelector(".bf-volume"),value:e.querySelector(".bf-volume-value"),point:e.querySelector(".bf-volume-point")}},time:e.querySelector(".bf-label-time"),selectTime:e.querySelector(".bf-label-select-time")},r={time:"0:00",duration:0,controll:{lock:!0,time:0,pf:void 0},pgbMousedown:!1,pgbLock:!1,pgbLeft:0,fullscreen:!1,fullbrowser:!1,select:{enable:!1,start:0,persent:0}},c={keydown:function(e){if("INPUT"!=e.target.tagName)switch(e.key){case" ":o.video.paused?o.video.play():o.video.pause();break;case"ArrowLeft":o.video.currentTime>2?o.video.currentTime-=2:o.video.currentTime=0,p.reload();break;case"ArrowRight":o.video.duration-o.video.currentTime>5?o.video.currentTime+=5:o.video.currentTime=o.video.duration,p.reload();break;case"ArrowUp":if(r.snackbarLock)break;o.video.volume>=1?d("éŸ³é‡å·²ç»è¾¾åˆ°æœ€å¤§å€¼"):o.video.volume=+(o.video.volume+.1>=1?1:o.video.volume+.1).toFixed(1),p.reload();break;case"ArrowDown":if(r.snackbarLock)break;o.video.volume<=0?d("å½“å‰æ˜¯é™éŸ³çŠ¶æ€"):o.video.volume=+(o.video.volume-.1<=0?0:o.video.volume-.1).toFixed(1),p.reload();break;case"A":case"a":p.reload(),c.capture.start();break;case"S":case"s":p.reload(),c.capture.end();break;case"W":case"w":f.clientToggle();break;case"F":case"f":f.screenToggle()}},mouseleave:function(){clearTimeout(r.controll.pf),r.controll.time=3,p.timer()},mousemove:function(e){p.reload()},mousemoveall:function(e){r.pgbMousedown&&u(e)},mousedown:function(e){if(2==e.button){if(e.target.classList.contains("bf-nomenu"))return;r.menuShow=!0;var t=e.pageY-this.scrollTop-54,a=e.pageX-this.scrollLeft;this.scrollHeight-t<80&&(t=this.scrollHeight-80),this.scrollWidth-a<230&&(a=this.scrollWidth-230),o.menu.style.left=a+"px",o.menu.style.top=t+"px",o.menu.style.display="inherit"}else if(0==e.button){if("LI"==e.target.tagName)return;"none"!=o.menu.style.display?o.menu.style.display="none":e.target!=o.video&&e.target!=o.controller||(o.video.paused?o.video.play():o.video.pause())}},mouseup:function(e){r.pgbMousedown&&(o.pgb.panel.classList.remove("bf-pgb-player-notransition"),e.target!=o.pgb.img&&(o.pgb.point.style.display="none",o.pgb.panel.classList.remove("bf-pgb-player-enter")),r.pgbMousedown=!1,r.pgbLock=!0,o.video.currentTime=o.pgb.time)},pgb:{mousedown:function(e){r.pgbMousedown||0!=e.button||(r.controll.lock=!0,r.pgbMousedown=!0,this.classList.add("bf-pgb-player-notransition"),r.pgbLeft=o.frame.scrollLeft+20,u(e))},img:function(e){e.preventDefault()},mouseenter:function(e){this.classList.add("bf-pgb-player-enter"),o.pgb.point.style.display="inherit"},mouseleave:function(e){r.pgbMousedown||(this.classList.remove("bf-pgb-player-enter"),o.pgb.point.style.display="none")}},video:{timeupdate:function(e){if(r.pgbLock)r.pgbLock=!1,!o.video.paused&&(r.controll.lock=!1,p.reload());else if(!r.pgbMousedown){var t=this.currentTime/this.duration;if(o.pgb.played.style.width=100*t+"%",o.time.innerHTML=v.format(this.currentTime)+" / "+r.time,o.pgb.point.style.left=(o.frame.scrollWidth-40)*t+"px",r.select.enable){r.controll.lock=!0;var a=o.pgb.select.style;if(a.left=(o.frame.scrollWidth-40)*r.select.persent+"px",(t=(this.currentTime-r.select.start)/this.duration)<0)return r.select.enable=!1,a.display="none",void(o.selectTime.style.display="none");o.selectTime.innerHTML="å·²é€‰æ‹©ï¼š"+r.select.start+" - "+this.currentTime,a.width=100*t+"%"}}},play:function(){r.qrcode&&c.btn.qrcode();var e=o.btn.play.getElementsByTagName("span")[0].classList;e.remove("bf-icon-play"),e.add("bf-icon-pause"),r.controll.lock=!1,p.reload()},progress:function(){o.pgb.buffer.style.width=v.getBufferTime(this.buffered)/this.duration*100+"%"},error:function(){},canplay:function(){o.loading.style.display="none",r.duration=this.duration},waiting:function(){o.loading.style.display="block"},ended:function(){},pause:function(){var e=o.btn.play.getElementsByTagName("span")[0].classList;e.add("bf-icon-play"),e.remove("bf-icon-pause"),r.controll.lock=!0,p.show()},volumechange:function(){c.volume.change(this.volume)},loadstart:function(){c.video.pause()},durationchange:function(){r.time=v.format(this.duration),o.time.innerHTML="0:00 / "+r.time}},btn:{play:function(){o.video.paused?o.video.play():o.video.pause()},fullscreen:function(){r.fullscreen?f.exitScreen():r.fullbrowser?f.exitClient():f.screen()},fullbrowser:function(){r.fullbrowser?f.exitClient():r.fullscreen?f.exitScreen():f.client()},volume:function(){this.lastValue?(o.video.volume=this.lastValue,this.lastValue=!1):(this.lastValue=o.video.volume,o.video.volume=0)},next:function(){l&&l()},previous:function(){s&&s()},save:function(){n&&n()}},capture:{start:function(){r.controll.lock=!0,r.select.start=o.video.currentTime;var e=o.video.currentTime/o.video.duration;r.select.persent=e;var t=o.pgb.select.style;t.left=(o.frame.scrollWidth-40)*e+"px",t.display="initial",t.width="0%",o.selectTime.style.display="initial",r.select.enable=!0},end:function(){r.select.enable?(r.controll.lock=!1,r.select.enable=!1,o.video.pause(),a(r.select.start,o.video.currentTime).then(function(e){d("æ·»åŠ æ ‡è®°æˆåŠŸ")}).catch(function(e){d("æ·»åŠ æ ‡è®°å¤±è´¥")}).then(function(){o.pgb.select.style.display="none",o.selectTime.style.display="none"})):d("è¯·å…ˆè®¾ç½®åˆå§‹ç‚¹")}},tooltip:{show:function(e){this.bottom=!1,this.moveLock=!1,this.classList.contains("bf-selector")&&null!=this.querySelector(".bf-selector-panel")&&(this.bottom=!0);var t=this.getAttribute("data-tooltip"),a=this.querySelector(".bf-tip");null==a?((a=document.createElement("div")).innerHTML=t,a.classList.add("bf-tip"),this.appendChild(a),this.classList.contains("bf-tooltip-left")?(a.style.top=this.offsetHeight/2-a.offsetHeight/2+"px",a.style.left=-a.offsetWidth-5+"px"):(a.style.top=this.bottom?5:-a.offsetHeight-5+"px",a.style.left=-a.offsetWidth/2+this.offsetWidth/2+"px"),this.tooltip=a):a.innerHTML=t},hide:function(){this.moveLock=!1;var e=this.querySelector(".bf-tip");null!=e&&e.remove()},move:function(){this.moveLock||null==this.querySelector(".bf-selector-panel")||(this.moveLock=!0,this.bottom=!0),this.bottom&&(this.tooltip.style.top="15px")}},selector:{show:function(e){var t=void 0,a=void 0,n=this.getAttribute("data-selector"),s=this.getAttribute("data-selector-type"),l="",o=document.createElement("div"),r=this,u=this.getAttribute("data-selector-event"),d=function e(){r.removeEventListener("mouseleave",e),t.lock=!1,setTimeout(function(){t.lock||(t.remove(),r.addEventListener("mouseenter",c.selector.show))},150)};"object"!=(void 0===n?"undefined":i(n))&&(n=JSON.parse(n));for(var f=0;f<n.length;f++)l+='<li data-index="'+f+'" data-value="'+n[f].value+'" class="bf-selector-item '+(n[f].active?"active":"")+'">'+n[f].name+"</li>",n[f].active=!1;t='<div class="bf-selector-panel"><ul>'+l+"</ul></div>",o.innerHTML=t,t=o.childNodes[0],this.appendChild(t),s&&"fixed"==s?(t.style.position="fixed",t.style.top=e.clientY+(r.offsetHeight-e.layerY)+"px",t.style.left=e.clientX+(r.offsetWidth/2-e.layerX)-t.offsetWidth/2+"px"):(t.style.top=-t.offsetHeight-10+"px",t.style.left=-t.offsetWidth/2+this.offsetWidth/2+"px"),a=this.querySelectorAll(".bf-selector-item");for(var p=0;p<a.length;p++)a[p].addEventListener("mousedown",function(){n[+this.getAttribute("data-index")].active=!0,r.setAttribute("data-selector",JSON.stringify(n)),r.setAttribute("data-value",this.getAttribute("data-value")),c[u](this.getAttribute("data-value")),t.remove(),r.addEventListener("mouseenter",c.selector.show)},!0);this.addEventListener("mouseleave",d),t.addEventListener("mouseenter",function(){t.lock=!0,r.removeEventListener("mouseleave",d),t.addEventListener("mouseleave",function(){t.remove(),r.addEventListener("mouseenter",c.selector.show)})}),this.removeEventListener("mouseenter",c.selector.show)}},volume:{lock:!1,moveLock:!1,pr:0,mouseenter:function(){o.panel.volume.area.style.display="initial",c.volume.lock=!0},mouseleave:function(){c.volume.lock=!1,c.volume.pr=setTimeout(function(){c.volume.lock||c.volume.hide()},180)},mouseenterTarget:function(){c.volume.lock=!0},mouseleaveTarget:function(){c.volume.lock=!1,!c.volume.moveLock&&c.volume.hide()},hide:function(){o.panel.volume.area.classList.add("bf-volume-hidden"),c.volume.pr=setTimeout(function(){c.volume.lock||c.volume.moveLock||(o.panel.volume.area.style.display="none",o.panel.volume.area.classList.remove("bf-volume-hidden"))},150)},mousedownTarget:function(e){var t=void 0,a=this.offsetLeft+this.parentElement.parentElement.offsetLeft+this.parentElement.parentElement.parentElement.parentElement.offsetLeft,i=function(e){t=(e.pageX-a)/80,o.video.volume=t<0?0:t>1?1:t};r.controll.lock=!0,c.volume.moveLock=!0,t=(e.pageX-a)/80,o.video.volume=t<0?0:t>1?1:t,o.panel.volume.panel.classList.add("bf-volume-noanimation"),document.addEventListener("mousemove",i,!0),document.addEventListener("mouseup",function e(){r.controll.lock=o.video.paused,c.volume.moveLock=!1,document.removeEventListener("mousemove",i,!0),document.removeEventListener("mouseup",e,!0),o.panel.volume.panel.classList.remove("bf-volume-noanimation")},!0)},change:function(e){var t=o.panel.volume.point,a=o.panel.volume.area,i=o.panel.volume.value,n=o.btn.volume.children[0].classList;a.style.display="initial",clearTimeout(c.volume.pr),n.remove("bf-icon-volumedown"),n.remove("bf-icon-volumemute"),n.remove("bf-icon-volumeoff"),n.remove("bf-icon-volumeup"),e>.7?n.add("bf-icon-volumeup"):e<.3&&e>0?n.add("bf-icon-volumemute"):0==e?n.add("bf-icon-volumeoff"):n.add("bf-icon-volumedown"),t.style.left=80*e+"px",i.style.width=80*e+"px",c.volume.pr=setTimeout(function(){c.volume.lock||c.volume.hide()},1e3)},bind:function(){o.btn.volume.addEventListener("mouseenter",c.volume.mouseenter),o.btn.volume.addEventListener("mouseleave",c.volume.mouseleave),o.panel.volume.panel.addEventListener("mousedown",c.volume.mousedownTarget),o.panel.volume.area.addEventListener("mouseenter",c.volume.mouseenterTarget),o.panel.volume.area.addEventListener("mouseleave",c.volume.mouseleaveTarget)}},changeRate:function(e){o.video.playbackRate=e}},u=function(e){var t=o.frame.scrollWidth-40,a=(e.pageX-r.pgbLeft)/t;a=a>=1?1:a<=0?0:a;var i=r.duration*a;o.pgb.played.style.width=100*a+"%",o.time.innerHTML=v.format(i)+" / "+r.time,o.pgb.point.style.left=a*t+"px",o.pgb.time=i},d=function(e){if(!r.snackbarLock){r.snackbarLock=!0;var t=o.frame.querySelector(".bf-snackbar"),a=void 0;null!=t&&(clearTimeout(r.snackbar),t.classList.add("bf-snackbar-hide"),setTimeout(function(){t.remove()},130)),(a=document.createElement("div")).classList.add("bf-snackbar"),a.appendChild(document.createTextNode(e)),o.frame.appendChild(a),a.style.left=o.frame.scrollWidth/2-a.scrollWidth/2+"px",r.snackbar=setTimeout(function(){a.classList.add("bf-snackbar-hide"),r.snackbar=setTimeout(function(){a.remove()},130)},5e3),r.snackbarLock=!1}},f={isFull:!1,type:0,screen:function(){var e=o.frame;document.addEventListener("webkitfullscreenchange",f.exitScreen),document.addEventListener("fullscreenchange",f.exitScreen),document.addEventListener("mozfullscreenchange",f.exitScreen),r.fullscreen=!0,f.isFull=!0,f.type=2,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),o.btn.fullscreen.setAttribute("data-tooltip","é€€å‡ºå…¨å±"),d("å·²è¿›å…¥å±å¹•å…¨å±")},client:function(){r.fullbrowser=!0,f.isFull=!0,f.type=1,o.frame.classList.add("bfplayer-full"),o.btn.fullbrowser.setAttribute("data-tooltip","é€€å‡ºå…¨å±"),d("å·²è¿›å…¥ç½‘é¡µå…¨å±")},exitScreen:function(){r.fullscreen?r.fullscreen=!1:(f.isFull=!1,f.type=0,o.btn.fullscreen.setAttribute("data-tooltip","å±å¹•å…¨å±"),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.removeEventListener("webkitfullscreenchange",f.exitScreen),document.removeEventListener("fullscreenchange",f.exitScreen),document.removeEventListener("mozfullscreenchange",f.exitScreen),d("å·²é€€å‡ºå±å¹•å…¨å±"))},exitClient:function(){r.fullbrowser=!1,f.isFull=!1,f.type=0,o.frame.classList.remove("bfplayer-full"),o.btn.fullbrowser.setAttribute("data-tooltip","ç½‘é¡µå…¨å±"),d("å·²é€€å‡ºç½‘é¡µå…¨å±")},clientToggle:function(){f.isFull?1==f.type&&f.exitClient():f.client()},screenToggle:function(){f.isFull?2==f.type&&f.exitScreen():f.screen()}},p={show:function(){o.controller.removeAttribute("style"),o.capture.panel.removeAttribute("style"),o.frame.style.cursor="auto"},timer:function(){if(!r.controll.lock){if(r.controll.time++,r.controll.time>=3&&!r.controll.lock)return o.controller.classList.add("bf-controller-hide"),o.capture.panel.classList.add("bf-controller-hide"),void setTimeout(function(){r.controll.time>=3&&!r.controll.lock&&(r.controll.time=0,p.hidden())},210);r.controll.pf=setTimeout(function(){p.timer()},1e3)}},hidden:function(){o.controller.classList.remove("bf-controller-hide"),o.capture.panel.classList.remove("bf-controller-hide"),o.controller.style.display="none",o.capture.panel.style.display="none",o.frame.style.cursor="none"},reload:function(){r.controll.lock||(p.show(),clearTimeout(r.controll.pf),r.controll.time=0,p.timer())}},v={format:function(e){var t=(Math.floor(+e)/60).toFixed(3).split("."),a=(Number(t[1])/1e3*60).toFixed(0);return a=1==a.length?"0"+a:a,t[0]+":"+a},getBufferTime:function(e){var t=e.length;return e.end(t-1)}};return this.snackbar=d,this.reload=function(e){o.video.pause(),o.pgb.played.style.width="0",o.video.src=e,o.video.load()},this.showMark=function(e,t){if(r.select.enable)d("è¯·å…ˆå®Œæˆå½“å‰æ ‡è®°");else{var a=e/o.video.duration,i=o.pgb.select.style;i.left=(o.frame.scrollWidth-40)*a+"px",a=(t-e)/o.video.duration,i.display="initial",i.width=100*a+"%",o.selectTime.innerHTML="å·²é€‰æ‹©ï¼š"+e+" - "+t,o.selectTime.style.display="initial",p.reload(),r.controll.lock=!0}},this.hideMark=function(){o.selectTime.style.display="none",o.pgb.select.style.display="none",r.controll.lock=o.video.paused,p.reload()},function(){var e=void 0;for(var t in c.video)o.video.addEventListener(t,c.video[t]);for(var a in c.btn)o.btn[a].addEventListener("click",c.btn[a]),o.btn[a].addEventListener("click",function(e){e.stopPropagation()});o.capture.start.addEventListener("click",c.capture.start),o.capture.end.addEventListener("click",c.capture.end),o.pgb.panel.addEventListener("mouseenter",c.pgb.mouseenter),o.pgb.panel.addEventListener("mouseleave",c.pgb.mouseleave),o.pgb.img.addEventListener("mousedown",c.pgb.img,!0),o.pgb.panel.addEventListener("mousedown",c.pgb.mousedown),document.addEventListener("mousemove",c.mousemoveall,!0),document.addEventListener("mouseup",c.mouseup,!0),o.frame.addEventListener("keydown",c.keydown),o.frame.addEventListener("mousemove",c.mousemove),o.frame.addEventListener("mouseleave",c.mouseleave),o.frame.addEventListener("contextmenu",function(e){e.target.classList.contains("bf-nomenu")||e.preventDefault()}),e=o.frame.querySelectorAll(".bf-tooltip");var i=!0,n=!1,s=void 0;try{for(var l,r=e[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var u=l.value;u.addEventListener("mouseenter",c.tooltip.show),u.addEventListener("mousemove",c.tooltip.move),u.addEventListener("mouseleave",c.tooltip.hide)}}catch(e){n=!0,s=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}e=o.frame.querySelectorAll(".bf-selector");var d=!0,f=!1,p=void 0;try{for(var v,m=e[Symbol.iterator]();!(d=(v=m.next()).done);d=!0)v.value.addEventListener("mouseenter",c.selector.show)}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}o.frame.addEventListener("mousedown",c.mousedown),c.volume.bind()}(),o.video.src=t,this}},"I9u+":function(e,t){},J373:function(e,t){},JpkI:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__assets_js_bfplayer_core__=__webpack_require__("EwH0"),__WEBPACK_IMPORTED_MODULE_1__assets_js_videolabel_core__=__webpack_require__("4TzI"),__WEBPACK_IMPORTED_MODULE_2__models_Video_js__=__webpack_require__("suMn"),__WEBPACK_IMPORTED_MODULE_3__models_Service_js__=__webpack_require__("c1um");__webpack_exports__.a={name:"VideoLabel",props:["id","tid","taskName","imagePage"],data:function(){return{loading:!0,activeIndex:"",penddingUserList:[],penddingUserSelectId:0,penddingUserActive:"user",task:{page:+this.imagePage,total:0,id:this.tid,list:[],index:0,name:this.taskName},videolabel:null,account:this.global.account}},watch:{id:function(){this.load(!0)}},methods:{load:function(e){1==this.account.group?this.getVideoInfo():3==this.account.group||2==this.account.group?e?this.getVideoInfo():this.getReviewerList():this.$message({type:"error",message:"å°šæœªç™»å½•"}),0==this.account.group||e||this.getList().then().catch()},getVideoInfo:function getVideoInfo(){var _this=this;this.loading=!0,__WEBPACK_IMPORTED_MODULE_2__models_Video_js__.a.getVideo(this.id,1==this.account.group?this.account.id:this.penddingUserSelectId).then(function(data){var src=__WEBPACK_IMPORTED_MODULE_3__models_Service_js__.a+"/api/video/"+_this.taskName+"/"+data.data.video.videoName;console.log(data),_this.loading=!1,_this.videolabel?_this.videolabel.reload(data.data.datas,src):_this.videolabel=Object(__WEBPACK_IMPORTED_MODULE_1__assets_js_videolabel_core__.a)(__WEBPACK_IMPORTED_MODULE_0__assets_js_bfplayer_core__.a,{labelId:data.data.labels[0].labelId,question:data.data.labels[0].question,type:data.data.labels[0].type,selector:"string"==typeof data.data.labels[0].selector?eval(data.data.labels[0].selector):data.data.labels[0].selector},data.data.datas,src,function(){_this.loading=!0,__WEBPACK_IMPORTED_MODULE_2__models_Video_js__.a.saveVideoLabel(_this.id,_this.videolabel.save(),1==_this.account.group?_this.account.id:_this.penddingUserSelectId).then(function(){_this.$message({type:"success",message:"ä¿å­˜æˆåŠŸ"})}).catch(function(){_this.$message({type:"error",message:"ä¿å­˜å¤±è´¥"})}).then(function(){_this.loading=!1})},function(){_this.next()},function(){_this.previous()})})},getReviewerList:function(){var e=this;__WEBPACK_IMPORTED_MODULE_2__models_Video_js__.a.getPendingUserList(this.id).then(function(t){var a=t.data;a.length>0?(e.activeIndex=a[0].userId+"",e.penddingUserSelectId=a[0].userId,e.getVideoInfo(),e.penddingUserList=a):e.$alert("è¯¥ä»»åŠ¡æœªåˆ†é…ç”¨æˆ·æ ‡è®°","æç¤º",{confirmButtonText:"ç¡®å®š",callback:function(t){e.$router.go(-1)}})})},penddingUserSelect:function(e){this.penddingUserSelectId=parseInt(e),this.getVideoInfo(!0)},setFinalVersion:function(){var e=this;this.loading=!0,__WEBPACK_IMPORTED_MODULE_2__models_Video_js__.a.setVideoFinalVersion(parseInt(this.id),this.penddingUserSelectId).then(function(){e.$message({type:"success",message:"è®¾ç½®æˆåŠŸ"})}).catch(function(){e.$message({type:"error",message:"è®¾ç½®å¤±è´¥"})}).then(function(){e.loading=!1})},goBack:function(){var e=this;this.$confirm("æœªä¿å­˜çš„è¿›åº¦å°†ä¼šä¸¢å¤±ï¼ˆåˆ é™¤æ“ä½œä¹Ÿéœ€è¦ä¿å­˜ï¼‰ï¼Œç¡®å®šè¿”å›ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){e.$router.push("/task/"+e.tid+"/"+e.taskName+"/5")}).catch(function(){})},getList:function(e){var t=this;return new Promise(function(a,i){__WEBPACK_IMPORTED_MODULE_2__models_Video_js__.a.getVideoList(t.task.id,t.task.page).then(function(i){var n=i.data.videos;if(t.task.list=n,t.task.total=i.data.totalpages,!e)for(var s=0;s<n.length;s++)n[s].videoId==t.id&&(t.task.index=s);a()}).catch(function(){t.$message({type:"error",message:"è·å–åˆ—è¡¨å¤±è´¥"}),i()})})},next:function(){var e=this,t=this.task;if(t.list.length-1==t.index){if(t.page==t.total)return void this.$message({type:"warning",message:"å·²ç»æ˜¯æœ€åä¸€ä¸ª"});t.page++,this.getVideoInfo().then(function(){t.index=0,e.$router.push("/video/"+t.list[t.index].videoId+"/"+t.id+"/"+t.name+"/"+t.page)})}else console.log(t.list),++t.index,this.$router.push("/video/"+t.list[t.index].videoId+"/"+t.id+"/"+t.name+"/"+t.page)},previous:function(){var e=this,t=this.task;if(0==t.index){if(1==t.page)return void this.$message({type:"warning",message:"å·²ç»æ˜¯ç¬¬ä¸€ä¸ª"});t.page--,this.getVideoInfo().then(function(){t.index=t.list.length-1,e.$router.push("/video/"+t.list[t.index].videoId+"/"+t.id+"/"+t.name+"/"+t.page)})}else--t.index,this.$router.push("/video/"+t.list[t.index].videoId+"/"+t.id+"/"+t.name+"/"+t.page)}},mounted:function(){this.load()}}},Mksb:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kV13"),n=a("DGCT"),s=a("c1um");var l={name:"Header",data:function(){return{account:this.global.account,name:s.b}},methods:{logout:function(){var e,t=this;document.cookie="",(e=this.account,Object(s.c)("/api/logout",e)).then(function(){t.$router.push("/login/dashboard")}).catch(function(){t.$message({type:"error",message:"é€€å‡ºç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•"})})}},mounted:function(){}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"header-wrap"},[a("h1",[e._v("\n        "+e._s(e.name)+"\n        "),a("small")]),e._v(" "),a("div",{staticClass:"header-spacer"}),e._v(" "),a("div",{staticClass:"header-right"},[a("el-dropdown",{on:{command:e.logout}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n            "+e._s(e.account.username)+"\n            "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e._v("Log out")])],1)],1)],1)])])],1)},staticRenderFns:[]};function r(e,t){var a=localStorage.getItem("group"),i=Object(s.g)(a),n=localStorage.getItem("id"),l={taskId:e,page:t,limit:30};return l[i+"Id"]=n,Object(s.e)("/api/"+i+"/getImgList",l)}var c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"100%"}},[a("el-menu",{ref:"menu",staticStyle:{height:"100%"},attrs:{router:!0,"default-active":e.activedIndex}},[a("el-menu-item",{attrs:{route:{path:"/dashboard"},index:"/dashboard"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-pie-chart"}),e._v(" "),a("span",[e._v("ä»ªè¡¨ç›˜")])])],2),e._v(" "),3==e.account.group?a("el-menu-item",{attrs:{route:{path:"/user"},index:"/user"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user"}),e._v(" "),a("span",[e._v("ç”¨æˆ·ç®¡ç†")])])],2):e._e(),e._v(" "),3==e.account.group?a("el-menu-item",{attrs:{route:{path:"/label"},index:"/label"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-camera"}),e._v(" "),a("span",[e._v("å›¾ç‰‡æ ‡ç­¾")])])],2):e._e(),e._v(" "),3==e.account.group?a("el-menu-item",{attrs:{route:{path:"/videolabel"},index:"/videolabel"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-video-camera"}),e._v(" "),a("span",[e._v("è§†é¢‘æ ‡ç­¾")])])],2):e._e(),e._v(" "),3==e.account.group?a("el-menu-item",{attrs:{route:{path:"/partition"},index:"/partition"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-finished"}),e._v(" "),a("span",[e._v("ä»»åŠ¡è®¾ç½®")])])],2):e._e(),e._v(" "),a("el-menu-item",{attrs:{route:{path:"/list"},index:"/list"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-document-checked"}),e._v(" "),a("span",[e._v("ä»»åŠ¡åˆ—è¡¨")])])],2)],1)],1)},staticRenderFns:[]};var u={name:"App",components:{Header:a("C7Lr")(l,o,!1,function(e){a("I9u+")},"data-v-72309be8",null).exports,Aside:a("C7Lr")({name:"Aside",data:function(){return{isCollapse:!1,taskList:this.global.task,activedIndex:this.$route.path,account:this.global.account,loading:!1}},methods:{},watch:{"$route.path":function(){this.activedIndex=this.$route.path}},mounted:function(){}},c,!1,function(e){a("Mksb")},"data-v-09cd0151",null).exports},mounted:function(){}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticStyle:{height:"100%"}},[t("el-header",[t("Header")],1),this._v(" "),t("el-container",{staticStyle:{height:"calc(100% - 60px)"}},[t("el-aside",{staticStyle:{"padding-bottom":"5px",height:"100%"},attrs:{width:"200px"}},[t("Aside")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(u,d,!1,function(e){a("cfRG")},"data-v-e9b9e9a4",null).exports,p={name:"Login",props:["path"],data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"}]},account:this.global.account,loading:!1}},methods:{login:function(){var e=this,t="/"+decodeURI(this.path.replace(/,/g,"/"));this.$refs.form.validate(function(a){if(!a)return!1;var i,n;e.loading=!0,(i=e.form.username,n=e.form.password,Object(s.e)("/api/login","username="+i+"&password="+n)).then(function(a){e.account.group="ROLE_ADMIN"==a.data.user.authorities?3:"ROLE_REVIEWER"==a.data.user.authorities?2:1,e.account.username=e.form.username,e.account.id=a.data.user.userId,e.account.token=a.data.token,localStorage.setItem("group",e.account.group),console.log("group:",e.account.group),localStorage.setItem("username",e.form.username),localStorage.setItem("id",a.data.user.userId),localStorage.setItem("token",a.data.token),e.$message({type:"success",message:"ç™»å½•æˆåŠŸ"}),e.$router.push(t)}).catch(function(t){e.$alert(t.message+"("+t.code+")","ç™»å½•å¤±è´¥",{confirmButtonText:"ç¡®å®š",type:"warning"})}).then(function(){e.loading=!1})})}},mounted:function(){}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card login-card"},[a("h1",[e._v("ç™»å½•")]),e._v(" "),a("el-form",{ref:"form",attrs:{rules:e.rules,"hide-required-asterisk":!0,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"ç”¨æˆ·å",prop:"username"}},[a("el-input",{attrs:{placeholder:"ç”¨æˆ·å"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"å¯†ç ",prop:"password"}},[a("el-input",{attrs:{placeholder:"å¯†ç ","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("ç™»å½•")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(p,v,!1,function(e){a("vLHs"),a("o+sD")},"data-v-e2a686b4",null).exports,h={name:"app",props:["path"],data:function(){return{account:this.global.account}},mounted:function(){var e=this,t="/"+decodeURI(this.path.replace(/,/g,"/")),a=localStorage.getItem("group");console.log("groupè®¾ç½®å®Œæˆ",a),a?Object(s.f)("/api/"+Object(s.g)(a)+"/getTaskList").then(function(){e.account.group=parseInt(localStorage.getItem("group")),e.account.username=localStorage.getItem("username"),e.account.id=localStorage.getItem("id"),e.account.token=localStorage.getItem("token"),e.$router.push(t)}).catch(function(){e.$router.push("/login/"+e.path)}):(this.$router.push("/login"+t),console.log("æœªå‘ç°groupï¼ï¼"))}},b={render:function(){var e=this.$createElement;return(this._self._c||e)("p",[this._v("ç™»å½•ä¸­...")])},staticRenderFns:[]},g=a("C7Lr")(h,b,!1,null,null,null).exports,y={name:"Home",data:function(){return{account:this.global.account,userCount:0,reviewerCount:0,taskCount:0,loading:!1}},mounted:function(){var e=this;3==this.account.group&&(this.loading=!0,(this.account,Object(s.c)("/api/admin/getCount")).then(function(t){e.userCount=t.data.userCount,e.reviewerCount=t.data.reviewerCount,e.taskCount=t.data.taskCount}).catch(function(t){e.$message({type:"error",message:"è·å–ä»ªè¡¨ä¿¡æ¯å¤±è´¥"})}).then(function(){e.loading=!1}))}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[3==e.account.group?[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dashboard"},[a("div",{staticClass:"dashboard-panel panel-number"},[a("div",{staticClass:"panel-header"},[e._v("\n          æ€»ä»»åŠ¡æ•°\n        ")]),e._v(" "),a("div",{staticClass:"panel-content"},[e._v("\n          "+e._s(e.taskCount)+"\n        ")])]),e._v(" "),a("div",{staticClass:"dashboard-panel panel-number"},[a("div",{staticClass:"panel-header"},[e._v("\n          æ€»æ ‡è®°ç”¨æˆ·æ•°\n        ")]),e._v(" "),a("div",{staticClass:"panel-content"},[e._v("\n          "+e._s(e.userCount)+"\n        ")])]),e._v(" "),a("div",{staticClass:"dashboard-panel panel-number"},[a("div",{staticClass:"panel-header"},[e._v("\n          æ€»å®¡æ ¸ç”¨æˆ·æ•°\n        ")]),e._v(" "),a("div",{staticClass:"panel-content"},[e._v("\n          "+e._s(e.reviewerCount)+"\n        ")])])])]:e._e(),e._v(" "),e._m(0),e._v(" "),e._m(1)],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"å…¬å‘Š"},[t("h3",{staticClass:"section-title"},[this._v("å…¬å‘Š")]),this._v(" "),t("p",[this._v("\n      2020-2-20 11:30pm åå¼€å§‹ç»´æŠ¤ã€‚å¯èƒ½ä¼šå‡ºç°æœåŠ¡æ–­å¼€ï¼Œéœ€è¦ä¸‹è½½æ•°æ®çš„è¯·æå‰ä¸‹è½½ï¼Œæ„Ÿè°¢å¤§å®¶çš„é…åˆ ğŸ˜€\n    ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"guide"},[a("h3",{staticClass:"section-title"},[e._v("å›¾ç‰‡æ ‡è®°æŒ‡å—")]),e._v(" "),a("p",[a("b",[e._v("å…³é”®ç‚¹æ ‡è®°è¯´æ˜ï¼š")]),a("br"),e._v(" "),a("b",[e._v("ä¸‹ä¸€ä¸ªæ ‡ç­¾ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-nextweek icon"}),e._v("è¿›è¡Œä¸‹ä¸€ä¸ªæ ‡ç­¾çš„æ ‡è®°ã€‚"),a("br"),e._v("\n      å¿…é¡»æŒ‰é€†åºåˆ é™¤å·²ç»æ·»åŠ çš„æ ‡è®°ï¼Œå¦åˆ™åˆ é™¤å¤±è´¥ã€‚"),a("br"),a("br"),e._v(" "),a("b",[e._v("ç§»åŠ¨/ç¼©æ”¾ï¼ˆå¿«æ·é”®ï¼šWï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-yidong icon"}),e._v("å¯è¿›è¡Œç§»åŠ¨ï¼ˆé¼ æ ‡æŒ‰ä¸‹ç§»åŠ¨ï¼‰ä¸ç¼©æ”¾ï¼ˆé¼ æ ‡æ»šè½®æ»šåŠ¨ï¼‰ã€‚"),a("br"),e._v(" "),a("b",[e._v("å¤šè¾¹å½¢é€‰æ‹©ï¼ˆå¿«æ·é”®ï¼šQï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-duobianxing icon"}),e._v("è¿›è¡Œå¤šè¾¹å½¢é€‰æ‹©æ¨¡å¼ï¼Œåœ¨å›¾ç‰‡ä¸Šç‚¹å‡»è¿›è¡Œæ ‡è®°ã€‚å·¦é”®å•å‡»ç¬¬ä¸€ä¸ªç‚¹å®Œæˆæ ‡è®°ï¼›å³é”®å•å‡»ç¬¬ä¸€ä¸ªç‚¹å–æ¶ˆæ ‡è®°ã€‚"),a("br"),e._v("æ­¤æ—¶ä½ ä»ç„¶å¯ä»¥æŒ‰ä¸‹ç§»åŠ¨/ç¼©æ”¾æŒ‰é’®è¿›è¡Œæ“ä½œã€‚"),a("br"),e._v(" "),a("b",[e._v("çŸ©å½¢é€‰æ‹©ï¼ˆå¿«æ·é”®ï¼šRï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-kuangxuanquyu icon"}),e._v("è¿›è¡ŒçŸ©å½¢é€‰æ‹©æ¨¡å¼ï¼Œåœ¨å›¾ç‰‡ä¸ŠæŸä¸ªç‚¹æŒ‰ä¸‹å¹¶æ‹–åŠ¨ï¼Œå®Œæˆé€‰æ‹©ã€‚"),a("br"),e._v(" "),a("b",[e._v("ç¼–è¾‘ï¼ˆå¿«æ·é”®ï¼šEï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-sheji icon"}),e._v("è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç‚¹å‡»ä¸€ä¸ªå·²å­˜åœ¨çš„é€‰æ‹©åŒºåŸŸè¿›è¡Œä¿®æ”¹ï¼ŒæŒ‰ä¸‹ç‚¹æ‹–åŠ¨é¼ æ ‡å¯ç§»åŠ¨ç‚¹ï¼Œç‚¹å‡»å›¾ç‰‡å…¶ä»–åŒºåŸŸç»“æŸä¿®æ”¹ã€‚"),a("br"),e._v(" "),a("b",[e._v("åˆ é™¤ï¼ˆå¿«æ·é”®ï¼šDï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-shanchu icon"}),e._v("è¿›å…¥åˆ é™¤æ¨¡å¼ï¼Œç‚¹å‡»ä¸€ä¸ªå·²å­˜åœ¨çš„é€‰æ‹©åŒºåŸŸåˆ é™¤ã€‚"),a("br"),e._v(" "),a("b",[e._v("æ”¾å¤§ï¼ˆå¿«æ·é”®ï¼šZï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-fangda icon"}),e._v("æŒ‰å·¦ä¸Šè§’æ”¾å¤§ã€‚"),a("br"),e._v(" "),a("b",[e._v("æ”¾å¤§ï¼ˆå¿«æ·é”®ï¼šCï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-suoxiao icon"}),e._v("æŒ‰å·¦ä¸Šè§’ç¼©å°ã€‚"),a("br"),e._v(" "),a("b",[e._v("ä¿å­˜ï¼ˆå¿«æ·é”®ï¼šCtrl+Sï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-baocun icon"}),e._v("ä¿å­˜ã€‚"),a("br"),e._v(" "),a("b",[e._v("å®¡æ ¸ç¡®è®¤ï¼ˆå¿«æ·é”®ï¼šCtrl+Cï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-dui icon"}),e._v("ç¡®è®¤é€‰ä¸­ç‰ˆæœ¬ï¼ˆä»…åœ¨ç®¡ç†å‘˜/å®¡æ ¸ç”¨æˆ·æ¨¡å¼ä¸‹ï¼‰ã€‚"),a("br"),e._v(" "),a("b",[e._v("ä¸Šä¸€ä¸ªï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-ai10 icon"}),e._v("è¿›å…¥ä¸Šä¸€ä¸ªæ ‡è®°é¡¹ç›®ã€‚"),a("br"),e._v(" "),a("b",[e._v("ä¸‹ä¸€ä¸ªï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"iconfont icon-ai09 icon"}),e._v("ä¿å­˜æè¿°åˆ—è¡¨ã€‚"),a("br"),e._v("\n      åœ¨ç¼–è¾‘/é€‰æ‹©æ¨¡å¼ä¸‹å¿…é¡»ç»“æŸæ ‡è®°æ‰å¯è¿›è¡Œä¸‹ä¸€æ¬¡æ ‡è®°ã€‚\n    ")]),e._v(" "),a("h3",{staticClass:"section-title"},[e._v("è§†é¢‘æ ‡è®°æŒ‡å—")]),e._v(" "),a("p",[a("b",[e._v("æ’­æ”¾ï¼ˆå¿«æ·é”®ï¼šSPACEï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-play icon"}),e._v("æˆ–è€…"),a("i",{staticClass:"bf-icon bf-icon-pause icon"}),e._v("å¼€å§‹æ’­æ”¾/æš‚åœã€‚"),a("br"),e._v(" "),a("b",[e._v("è®¾ç½®èµ·ç‚¹ï¼ˆå¿«æ·é”®ï¼šAï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-xiazai icon"}),e._v("è®¾ç½®æ ‡è®°æè¿°èµ·ç‚¹ã€‚"),a("br"),e._v(" "),a("b",[e._v("è®¾ç½®ç»ˆç‚¹ï¼ˆå¿«æ·é”®ï¼šSï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-shangchuan icon"}),e._v("è®¾ç½®æ ‡è®°æè¿°èµ·ç‚¹ç»ˆç‚¹ã€‚"),a("br"),e._v(" "),a("b",[e._v("å¿«è¿›ï¼ˆå¿«æ·é”®ï¼šâ†’ï¼‰ï¼š")]),e._v("ç‚¹å‡»è¿›åº¦æ¡æˆ–ä½¿ç”¨å¿«æ·é”®è¿›è¡Œå¿«è¿›æ“ä½œï¼ˆ5ç§’ï¼‰ã€‚"),a("br"),e._v(" "),a("b",[e._v("å¿«é€€ï¼ˆå¿«æ·é”®ï¼šâ†ï¼‰ï¼š")]),e._v("ç‚¹å‡»è¿›åº¦æ¡æˆ–ä½¿ç”¨å¿«æ·é”®è¿›è¡Œå¿«è¿›æ“ä½œï¼ˆ5ç§’ï¼‰ã€‚"),a("br"),e._v(" "),a("b",[e._v("ç½‘é¡µå…¨å±ï¼ˆå¿«æ·é”®ï¼šWï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-mini icon"}),e._v("è¿›å…¥æˆ–é€€å‡ºç½‘é¡µå…¨å±ã€‚"),a("br"),e._v(" "),a("b",[e._v("å±å¹•å…¨å±ï¼ˆå¿«æ·é”®ï¼šFï¼‰ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-fullscreen icon"}),e._v("è¿›å…¥æˆ–é€€å‡ºå±å¹•å…¨å±"),a("b",[e._v("ï¼ˆå±å¹•å…¨å±æ— æ³•å®Œæˆæ ‡è®°ï¼‰")]),e._v("ã€‚"),a("br"),e._v(" "),a("b",[e._v("ä¸Šä¸€ä¸ªï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-previous icon"}),e._v("è¿›å…¥ä¸Šä¸€ä¸ªæ ‡è®°é¡¹ç›®ã€‚"),a("br"),e._v(" "),a("b",[e._v("ä¸‹ä¸€ä¸ªï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-next icon"}),e._v("è¿›å…¥ä¸‹ä¸€ä¸ªæ ‡è®°é¡¹ç›®ã€‚"),a("br"),e._v(" "),a("b",[e._v("ä¿å­˜ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-save icon"}),e._v("ä¿å­˜æè¿°åˆ—è¡¨ã€‚"),a("br"),e._v(" "),a("b",[e._v("å®¡æ ¸ç¡®è®¤ï¼š")]),e._v("ç‚¹å‡»"),a("i",{staticClass:"bf-icon bf-icon-wancheng icon"}),e._v("ç¡®è®¤é€‰ä¸­ç‰ˆæœ¬ï¼ˆä»…åœ¨ç®¡ç†å‘˜/å®¡æ ¸ç”¨æˆ·æ¨¡å¼ä¸‹ï¼‰ã€‚"),a("br"),e._v(" "),a("b",[e._v("æ³¨æ„ï¼šåˆ é™¤æ“ä½œä¹Ÿéœ€è¦ç‚¹å‡»ä¿å­˜ã€‚")])])])}]};var k=a("C7Lr")(y,_,!1,function(e){a("av3+")},"data-v-4ecae795",null).exports,w=a("suMn"),S={name:"task",props:["id","taskName","type"],data:function(){return{imglist:[],review:!1,page:{now:1,total:1},account:this.global.account,loading:!1,imghost:s.a,labeledList:{},notice:{type:["åˆ†ç±»","æ£€æµ‹","åˆ†å‰²","å…³é”®ç‚¹","è§†é¢‘æè¿°"],content:["é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ°å½“çš„æ ‡ç­¾å¯¹å›¾ç‰‡è¿›è¡Œåˆ†ç±»ã€‚","åªå…è®¸æ·»åŠ çŸ©å½¢æ¡†ã€‚","åªå…è®¸æ·»åŠ å¤šè¾¹å½¢ã€‚","è¯·æŒ‰ç…§ç»™å®šçš„æ ‡ç­¾æŒ‰é¡ºåºæ ‡è®°ï¼ŒæŒ‰å·¦è¾¹çš„â€˜ä¸‹ä¸€ä¸ªæ ‡ç­¾â€™æŒ‰é’®å³å¯è¿›å…¥ä¸‹ä¸€ä¸ªæ ‡ç­¾æ ‡è®°ã€‚æ¯ä¸ªç‚¹éƒ½æ˜¯æœ‰é¡ºåºçš„ã€‚","å¯¹è§†é¢‘è¿›è¡Œæ‰“ç‚¹ï¼Œæ·»åŠ æè¿°ã€‚"]},alert:{title:"",desc:""}}},watch:{id:function(){this.page.now=1,this.page.total=1,this.show()}},methods:{showReviewer:function(){this.review?this.review=!1:this.review=!0},show:function(){var e=this;this.loading=!0,(5!=this.type?r(this.id,this.page.now):w.a.getVideoList(this.id,this.page.now)).then(function(t){e.labeledList=[],console.log("Start to doing something");var a=!0,i=!1,n=void 0;try{for(var s,l=(5!=e.type?t.data.labelImageIds:t.data.labelVideoIds)[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;e.labeledList[o+""]=!0,console.log("Add labeledImageID to labeledList")}}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}e.imglist=5!=e.type?t.data.images:t.data.videos,e.page.total=t.data.totalpages}).catch(function(t){e.$alert("è·å–åˆ—è¡¨å¤±è´¥ï¼Œ"+t.message+"("+t.code+")ã€‚\r\nè¯·é‡è¯•","æç¤º",{confirmButtonText:"ç¡®å®š",type:"warning"})}).then(function(){e.loading=!1})},pageChange:function(e){this.show()},goto:function(e,t){null!=e&&1==this.account.group?this.$alert("è¯¥æ ‡æ³¨å·²ç»é”å®š","æç¤º",{confirmButtonText:"ç¡®å®š",type:"warning"}):this.$router.push(t)}},mounted:function(){this.alert.title=this.notice.type[this.type-1],this.alert.desc=this.notice.content[this.type-1],this.show()}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{size:"mini"},on:{click:e.showReviewer}},[e._v("æœªæ ‡æ³¨")]),e._v(" "),a("el-alert",{attrs:{title:e.alert.title,description:e.alert.desc,type:"info","close-text":"çŸ¥é“äº†"}}),e._v(" "),e.id?[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"img-list"},e._l(e.imglist,function(t){return a("div",{key:5!=e.type?t.imageId:t.videoId,staticClass:"img-item",on:{click:function(a){return e.goto(t.userConfirmId,5!=e.type?"/img/"+t.imageId+"/"+e.id+"/"+e.type+"/"+e.taskName+"/"+e.page.now:"/video/"+t.videoId+"/"+e.id+"/"+e.taskName+"/"+e.page.now)}}},[e.review&&e.labeledList[5!=e.type?t.imageId:t.videoId+""]?e._e():a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-image",{staticClass:"img-item-img",attrs:{lazy:!0,src:5!=e.type?e.imghost+"/api/thumb/"+e.taskName+"/"+t.imageThumb:e.imghost+"/api/videos/"+e.taskName+"/"+t.videoThumb,fit:"cover"}}),e._v(" "),a("div",{staticClass:"img-item-span"},[a("span",[e._v("\n              "+e._s(5!=e.type?t.imageName:t.videoName)+"\n              "),null!=t.userConfirmId&&0!=t.userConfirmId?a("el-tag",{staticClass:"img-item-finish",attrs:{type:"success",size:"mini"}},[e._v("å·²å®¡æ ¸")]):e._e(),e._v(" "),e.labeledList[5!=e.type?t.imageId:t.videoId+""]?a("el-tag",{staticClass:"img-item-labeled",attrs:{type:"primary",size:"mini"}},[e._v("\n                å·²æ ‡è®°\n              ")]):e._e()],1)])],1)],1)}),0),e._v(" "),e.page.total>1?a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next,jumper","page-count":e.page.total,"current-page":e.page.now},on:{"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.page,"now",t)},"update:current-page":function(t){return e.$set(e.page,"now",t)}}}):e._e()]:a("h1",[e._v("Illegal task id! Please refresh this page.")])],2)},staticRenderFns:[]};var x=a("C7Lr")(S,L,!1,function(e){a("VGDj")},"data-v-e19c1418",null).exports;var C={name:"label",props:["id","tid","type","taskName","imagePage"],data:function(){return{img:"",label:[],select:[],value1:[],name:"",area:[],count:0,showComfirmed:!0,showDeleted:!1,penddingUserList:[],isReviewer:!1,loading:!0,penddingUserSelectId:0,labelCore:void 0,penddingUserActive:"user",account:this.global.account,activeIndex:"",task:{page:+this.imagePage,total:0,id:this.tid,list:[],index:0,name:this.taskName},classify:{label:[],select:[],dialogVisible:!1},labelIndex:0,options:[{value:"é€‰é¡¹1",label:"é»„é‡‘ç³•"},{value:"é€‰é¡¹2",label:"åŒçš®å¥¶"},{value:"é€‰é¡¹3",label:"èšµä»”ç…"},{value:"é€‰é¡¹4",label:"é¾™é¡»é¢"},{value:"é€‰é¡¹5",label:"åŒ—äº¬çƒ¤é¸­"}]}},watch:{id:function(){this.load(!0)}},methods:{print:function(){console.log(this.options.value1),console.log(this.label),console.log(this.value1)},showDelete:function(){var e=this;console.log("delete"),this.loadMark(),this.$confirm("æ˜¯å¦åˆ é™¤è¯¥å›¾ç‰‡ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"info"}).then(function(){e.deleteImageById()}).catch(function(){})},showComfirm:function(){var e=this;console.log("func"),this.$confirm("æ˜¯å¦ç¡®å®šè¯¥ç‰ˆæœ¬ä¸ºæœ€ç»ˆç‰ˆæœ¬ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"info"}).then(function(){e.setFinalVersion()}).catch(function(){})},format:function(e){return 100===e?"æ»¡":e+"%"},load:function(e){1==this.account.group?this.getImgInfo(e):3==this.account.group||2==this.account.group?e?this.getImgInfo(e):this.getUserLabelList(e):this.$message({type:"error",message:"å°šæœªç™»å½•"}),0==this.account.group||e||this.getImageList().then().catch()},getImgInfo:function(e){var t,a,i,n,l,o=this;this.loading=!0,(t=this.id,a=1==this.account.group?this.account.id:this.penddingUserSelectId,this.account,i=localStorage.getItem("group"),n=Object(s.g)(i),l={imageId:t},void 0!=a&&(l.userId=a),Object(s.e)("/api/"+n+"/getImg",l)).then(function(e){var t=s.a+"/api/image/"+o.taskName+"/"+e.data.image.imageName;o.img==t&&(o.loading=!1);var a=JSON.stringify(e.data.labels);a=a.replace(/labelId/g,"id").replace(/labelName/g,"label").replace(/labelType/g,"type").replace(/labelColor/g,"color"),o.label=JSON.parse(a),o.name=e.data.image.imageName,o.area=[],o.classify.select=[],o.labelIndex=0;var i="",n=!0,l=!1,r=void 0;try{for(var c,u=e.data.datas[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var d=c.value,f=[],p=!0,v=!1,m=void 0;try{for(var h,b=d.point[Symbol.iterator]();!(p=(h=b.next()).done);p=!0){var g=h.value;f.push([g.x,g.y])}}catch(e){v=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(v)throw m}}o.area.push({labelId:d.labelId,labelType:d.labelType,desc:d.dataDesc,points:f,iscrowd:d.iscrowd}),1==o.type&&o.classify.select.push(d.labelId),i!=d.labelId&&(o.labelIndex++,i=d.labelId)}}catch(e){l=!0,r=e}finally{try{!n&&u.return&&u.return()}finally{if(l)throw r}}if(o.img==t)return o.labelCore.reload(o.area),void o.loadLabelIndex();o.img=t}).catch(function(e){o.loading=!1,o.$alert("è·å–å›¾ç‰‡ä¿¡æ¯å¤±è´¥ï¼Œ"+e.message+"("+e.code+")ã€‚\r\nè¯·é‡è¯•","æç¤º",{confirmButtonText:"ç¡®å®š",type:"warning"})})},getUserLabelList:function(e){var t,a,i,n=this;(t=this.id,this.account,a=localStorage.getItem("group"),i=Object(s.g)(a),Object(s.e)("/api/"+i+"/getPendingUserList",{imageId:t})).then(function(t){var a=t.data;a.length>0?(n.activeIndex=a[0].userId+"",n.penddingUserSelectId=a[0].userId,n.getImgInfo(e),n.penddingUserList=a):n.$alert("è¯¥ä»»åŠ¡æœªåˆ†é…ç”¨æˆ·æ ‡è®°","æç¤º",{confirmButtonText:"ç¡®å®š",callback:function(e){n.$router.go(-1)}})}).catch(function(e){n.$message({type:"error",message:"è·å–ç”¨æˆ·æ ‡è®°åˆ—è¡¨å¤±è´¥ï¼Œ"+e.message+"("+e.code+")"})})},loadMark:function(){var e=this;if(""!=this.img){if(this.loading=!1,null!=this.labelCore)return this.labelCore.reload(this.area),void this.loadLabelIndex();this.labelCore=new function(e,t,a,i,n,s,l,o){var r=e.querySelector(".label-area"),c=e.querySelector(".label-popup"),u=e.querySelector(".label-main"),d=document.querySelector(".label-list .label-list-ul"),f=e.querySelector("canvas"),p=e.querySelector("img"),v=e.querySelector(".label-svg"),m=e.querySelector(".save"),h=e.querySelector(".confirm"),b={move:e.querySelector(".move"),select:e.querySelector(".select"),polygon:e.querySelector(".polygon"),rectangle:e.querySelector(".rectangle"),edit:e.querySelector(".edit"),delete:e.querySelector(".delete"),zoomin:e.querySelector(".zoomin"),zoomout:e.querySelector(".zoomout")},g={save:e.querySelector(".label-save-label"),delete:e.querySelector(".label-delete-label"),label:e.querySelector(".label-label"),crowd:e.querySelector(".label-crowd"),desc:e.querySelector(".label-desc")},y=function(e,t,a){return e+5>=a[0]&&e-5<=a[0]&&t+5>=a[1]&&t-5<=a[1]},_={mousedown:function(e){if(!V){var t=e.layerX/("Chrome"==M?A:1),a=e.layerY/("Chrome"==M?A:1);switch(console.log("Mousedown ("+t+","+a+")"),C){case 1:j=!0;break;case 2:k.addPoint(t,a,e.button,e.clientX,e.clientY);break;case 3:j=!0,V=!0,k.rectangleInit(t,a);break;case 4:O&&k.dragPoint(t,a,e.clientX,e.clientY);break;default:console.warn("Illegal mode!")}}},mouseup:function(e){if(j)if(j=!1,3==C)V=!1,w.addArea(e.clientX,e.clientY);else if(4==C){if(!U){var t=(q[D][0]+q[D-1<0?q.length-1:D-1][0])/2,a=(q[D][1]+q[D-1<0?q.length-1:D-1][1])/2;q.splice(D,0,[t,a,1]),t=(q[D+1][0]+q[D+2>q.length-1?0:D+2][0])/2,a=(q[D+1][1]+q[D+2>q.length-1?0:D+2][1])/2,q.splice(D+2,0,[t,a,1])}w.drawArea()}},mousemove:function(e){if(j){var t=e.layerX/("Chrome"==M?A:1),a=e.layerY/("Chrome"==M?A:1);switch(C){case 1:var i=r.scrollLeft-e.movementX,n=r.scrollTop-e.movementY;r.scrollTo({top:n<0?0:n,left:i<0?0:i});break;case 3:w.drawRectangle(t,a);break;case 4:0==U?(q[D][0]=t,q[D][1]=a,w.drawArea()):w.drawRectangle(t,a,D)}}},wheel:function(e){1==C&&w.zoom(e.deltaY<0?.05:-.05)},clickbutton:function(t,a){if(V)alert("è¯·å…ˆå®Œæˆæ ‡ç­¾ç¼–è¾‘ä»»åŠ¡");else{var i=this;if("number"==typeof t&&(i=a),i!=b.zoomin)if(i!=b.zoomout)if(0!=q.length&&(2!=N&&i==b.polygon||3!=N&&i==b.rectangle||4!=N&&i==b.edit||0!=N&&i==b.delete))alert("è¯·å…ˆå®Œæˆå½“å‰æ ‡è®°åŒºåŸŸã€‚\næ·»åŠ æ¨¡å¼ä¸‹ï¼Œåœ¨èµ·ç‚¹å¤„æŒ‰ä¸‹å·¦é”®å®Œæˆæ ‡è®°ï¼Œåœ¨èµ·ç‚¹å¤„æŒ‰ä¸‹å³é”®æ’¤é”€æ ‡è®°\nä¿®æ”¹æ¨¡å¼ä¸‹ï¼Œç‚¹å‡»ç©ºç™½å¤„å®Œæˆä¿®æ”¹");else{switch(0==q.length&&(N=0),i){case b.select:C=0,O=4==N&&O;break;case b.move:C=1,O=4==N&&O;break;case b.polygon:C=2,N=2,O=!0;break;case b.rectangle:C=3,N=3,O=!0;break;case b.edit:O=4==N&&O;var n=[4,4,!1];C=n[0],N=n[1];break;case b.delete:C=5,O=!1}e.querySelector(".active").classList.remove("active"),i.querySelector("li").classList.add("active")}else w.zoom(-.15);else w.zoom(.15)}},savelabel:function(){var a=g.label.querySelectorAll("option:checked"),i=Array.from(a).map(function(e){return e.value});w.createArea(i,g.desc.value,t[g.label.value].color,g.crowd.checked),c.style.display="none",V=!1,4==C&&(O=!1),e.focus()},deletelabel:function(){q=[],w.drawArea(),c.style.display="none",V=!1,4==C&&(O=!1),e.focus()},save:function(){n($)},confirm:function(){s($)},keydown:function(e){if(e.target!=g.desc)switch(e.key){case"a":case"A":_.clickbutton(1,b.select);break;case"w":case"W":_.clickbutton(1,b.move);break;case"q":case"Q":_.clickbutton(1,b.polygon);break;case"r":case"R":_.clickbutton(1,b.rectangle);break;case"e":case"E":_.clickbutton(1,b.edit);break;case"d":case"D":_.clickbutton(1,b.delete);break;case"z":case"Z":_.clickbutton(1,b.zoomin);break;case"x":case"X":_.clickbutton(1,b.zoomout);break;case"s":case"S":e.ctrlKey&&(_.save(),e.preventDefault());break;case"C":e.ctrlKey&&(_.confirm(),e.preventDefault())}}},k={addPoint:function(e,t,a,i,n){U=0,R=-1,0!=q.length&&y(e,t,q[0])?2==a?q=[]:w.addArea(i,n):q.push([e,t,0]),w.drawArea()},rectangleInit:function(e,t){U=1,R=-1;for(var a=0;a<4;a++)q.push([e,t,0]);D=2},dragPoint:function(e,t,a,i){var n=D;for(var s in D=-1,q)if(y(e,t,q[s])){D=parseInt(s);break}n>=0&&1==q[n][2]&&(D!=n&&D!=n+2?(-1!=D&&(D=D>n+1?D-2:D==n+1?n:D),q.splice(n+2,1),q.splice(n,1)):D==n?q.splice(n+2,1):(q.splice(n,1),D--)),-1!=D?(q[D][2]=0,j=!0):w.addArea(a,i)}},w={drawArea:function(e){if(z.clearRect(0,0,f.width,f.height),z.lineWidth=3,0!=q.length){var t=!1;z.beginPath(),z.strokeStyle="rgba(87, 95, 207,1.0)";var a=!0,i=!1,n=void 0;try{for(var s,l=q[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;t?z.lineTo(o[0],o[1]):(z.moveTo(o[0],o[1]),t=!0)}}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}if((3==C||4==C||V)&&z.lineTo(q[0][0],q[0][1]),z.stroke(),z.closePath(),z.fillStyle="white",z.strokeStyle="rgba(87, 95, 207,1.0)",4==C){var r=!0,c=!1,u=void 0;try{for(var d,p=q[Symbol.iterator]();!(r=(d=p.next()).done);r=!0){var v=d.value;z.beginPath(),z.ellipse(v[0],v[1],2,2,0,0,2*Math.PI),z.stroke(),z.fill(),z.closePath()}}catch(e){c=!0,u=e}finally{try{!r&&p.return&&p.return()}finally{if(c)throw u}}}else z.beginPath(),z.ellipse(q[0][0],q[0][1],2,2,0,0,2*Math.PI),z.stroke(),z.fill(),z.closePath();e&&j&&(z.strokeStyle="#eee",z.lineWidth=1,z.beginPath(),z.moveTo(0,q[D][1]),z.lineTo(I,q[D][1]),z.stroke(),z.closePath(),z.beginPath(),z.moveTo(q[D][0],0),z.lineTo(q[D][0],T),z.stroke(),z.closePath())}},createArea:function(e,a,i,n,s){var o=[],r=!0,c=!1,u=void 0;try{for(var d,f=q[Symbol.iterator]();!(r=(d=f.next()).done);r=!0){var p=d.value;0==p[2]&&o.push(p)}}catch(e){c=!0,u=e}finally{try{!r&&f.return&&f.return()}finally{if(c)throw u}}!Array.isArray(e)&&(e=[e]);var v=!0,m=!1,h=void 0;try{for(var b,y=e[Symbol.iterator]();!(v=(b=y.next()).done);v=!0){var _=b.value;$.push({id:t[_].id,index:e,desc:a,color:t[_].color,type:2==C||4==C&&0==U?0:1,points:o,iscrowd:n?1:0})}}catch(e){m=!0,h=e}finally{try{!v&&y.return&&y.return()}finally{if(m)throw h}}var k="",S=!0,L=!1,x=void 0;try{for(var I,T=o[Symbol.iterator]();!(S=(I=T.next()).done);S=!0){var E=I.value;k+=E[0]+","+E[1]+" "}}catch(e){L=!0,x=e}finally{try{!S&&T.return&&T.return()}finally{if(L)throw x}}console.log("path",k),q=[],w.createSVGPath(k,i,i+"66"),w.drawArea(),g.desc.value="",g.crowd.checked=!1,l&&!s&&l()},addArea:function(e,t){V=!0,w.updateLabelSelector(U),c.style.display="inline",r.clientWidth<e+c.clientWidth+10?c.style.left=r.clientWidth-c.clientWidth-10+"px":c.style.left=e+"px",r.clientHeight<t+c.clientHeight+10?c.style.top=r.clientHeight-c.clientHeight-5+"px":c.style.top=t+"px",w.drawArea()},createSVGPath:function(e,t,a){var i=document.createElementNS("http://www.w3.org/2000/svg","polygon");i.setAttribute("points",e),i.setAttribute("stroke",t),i.setAttribute("stroke-width",3),i.setAttribute("fill","none");var n=$[$.length-1];i.setAttribute("label",n.id),i.addEventListener("mouseenter",function(){!O&&i.setAttribute("fill",a)}),i.addEventListener("click",function(){O||(5==C?w.removeAreaList(n,this):4==C&&(U=n.type,R=n.id,q=n.points,g.label.value=n.index,g.desc.value=n.desc,g.crowd.checked=n.iscrowd,w.drawArea(),w.removeAreaList(n,this),O=!0))}),i.addEventListener("mouseleave",function(){!O&&i.setAttribute("fill","none")}),v.appendChild(i),w.updateCount(n.id,!0)},removeAreaList:function(e,t){for(var a in $)if($[a]==e){if(-1!=P&&e.index!=P-1)return void alert("è¯·æŒ‰ç…§æ ‡è®°é¡ºåºåˆ é™¤");w.updateCount(e.id,!1),$.splice(a,1),t&&t.remove();break}var i=!0;if(-1!=P)for(var n in $)if($[n].index==P-1){i=!1;break}o&&i&&o()},drawRectangle:function(e,t){var a=parseInt(D),i=2==a||0==a?0:1;q[a+1>3?0:a+1][i]=0==i?e:t,q[a][0]=e,q[a][1]=t,q[a-1<0?3:a-1][0==i?1:0]=0==i?t:e,w.drawArea(!0)},zoom:function(e){A+=e,u.style.transform="scale("+A+")"},updateCount:function(e,t){var a=document.querySelector(".label-list-count-"+e),i=parseInt(a.innerHTML);console.log("si Add",t,"v",i,"e"),a.innerHTML=t?++i:--i,console.log("v",i)},updateLabelSelector:function(e){g.label.innerHTML="";var a=0,i=0;for(var n in t){var s=t[n],l=document.createElement("option");l.value=n,l.innerHTML=s.label,l.style.color=s.color,console.log("i:",a,"label",g.label),g.label.appendChild(l),-1!=R&&s.id==R&&(i=a),a++}g.label.disabled=!1,0!=i?g.label.childNodes[i].selected=!0:-1!=P&&(g.label.childNodes[P].selected=!0,g.label.disabled=!0)}},S=function(){v.style.width=I+"px",v.style.height=T+"px",p.width=I,p.height=T,f.width=I,f.height=T,console.log(Math.abs(r.clientHeight*E-T)+"  "+Math.abs(r.clientWidth-I)),A=Math.abs(r.clientHeight*E-T)>Math.abs(r.clientWidth-I)?r.clientHeight/T:r.clientWidth/I,u.style.transform="scale("+A+")",L(),x()},L=function(){if(t){d.innerHTML="";var e=!0,a=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var l=n.value,o=document.createElement("div");o.innerHTML='<li class="label-list-item">\n                <div style="background-color:'+l.color+'" class="label-list-color"></div>\n                <div class="label-list-title">\n                    <h3>'+l.label+"</h3>\n                    <p>"+l.color+'</p>\n                </div>\n                <div class="label-list-right">\n                    <span data-id="'+l.id+'" class="iconfont icon-kejian label-list-visible"></span>\n                    <div class="label-list-count label-list-count-'+l.id+'">0</div>\n                </div>\n            </li>',d.appendChild(o.childNodes[0])}}catch(e){a=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}var r=document.querySelectorAll(".label-list-visible"),c=!0,u=!1,f=void 0;try{for(var p,v=r[Symbol.iterator]();!(c=(p=v.next()).done);c=!0)p.value.addEventListener("click",function(){this.visible=!this.visible&&void 0!=this.visible;var e=document.querySelectorAll("[label='"+this.getAttribute("data-id")+"']"),t=!0,a=!1,i=void 0;try{for(var n,s=e[Symbol.iterator]();!(t=(n=s.next()).done);t=!0)n.value.style.display=this.visible?"inline":"none"}catch(e){a=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw i}}this.classList.remove(this.visible?"icon-bukejian":"icon-kejian"),this.classList.add(this.visible?"icon-kejian":"icon-bukejian")})}catch(e){u=!0,f=e}finally{try{!c&&v.return&&v.return()}finally{if(u)throw f}}}},x=function(){if(i){var e=C;C=4;var a=!0,n=!1,s=void 0;try{for(var l,o=i[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var r=l.value;q=[];var c=!0,u=!1,d=void 0;try{for(var f,p=r.points[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var v=f.value;q.push([v[0],v[1],0])}}catch(e){u=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw d}}for(var m in t)if(t[m].id==r.labelId){U=r.labelType,w.createArea(m,r.desc,t[m].color,r.iscrowd,!0);break}}}catch(e){n=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}C=e}},C=0,I=p.naturalWidth,T=p.naturalHeight,E=I/T,$=[],q=[],A=void 0,V=!1,j=!1,O=!0,N=0,D=-1,U=0,R=-1,M=-1!=navigator.userAgent.indexOf("Chrome")?"Chrome":"Firefox",P=-1,z=f.getContext("2d");for(var B in u.addEventListener("mousedown",_.mousedown),u.addEventListener("mouseup",_.mouseup),u.addEventListener("mousemove",_.mousemove),e.addEventListener("keydown",_.keydown),v.addEventListener("contextmenu",function(e){e.preventDefault()}),r.addEventListener("wheel",_.wheel),b)b[B].addEventListener("click",_.clickbutton);return g.save.addEventListener("click",_.savelabel),g.delete.addEventListener("click",_.deletelabel),m.addEventListener("click",_.save),h&&h.addEventListener("click",_.confirm),S(),{reload:function(e){I=p.naturalWidth,T=p.naturalHeight,$=[],v.innerHTML="",i=e,S()},setClassify:function(e){for(var a in(q=[]).push([0,0,0]),t)if(t[a].id==e){console.log("label",t[a].id),U=0,w.createArea(a,"",t[a].color,!1);break}},clean:function(){for(var e=$.length;e--;)w.removeAreaList($[0])},setLabelIndex:function(e){P=e}}}(document.querySelector(".label-core"),this.label,this.value1,this.area,function(t){e.saveLabelArea(t)},function(e){},function(){},function(){4==e.type&&(e.labelCore.setLabelIndex(--e.labelIndex),e.$message({type:"info",message:"ä½ å·²ç»åˆ é™¤ä¸Šä¸€ä¸ªæ ‡ç­¾çš„æ‰€æœ‰æ ‡è®°ï¼Œç°åœ¨è¯·æ ‡è®°æ ‡ç­¾:'"+e.label[e.labelIndex].label+"'"}))}),this.loadLabelIndex()}},loadLabelIndex:function(){if(4==this.type){if(console.log(this.labelIndex),this.labelCore.setLabelIndex(this.labelIndex),this.labelIndex==this.label.length)return void this.$message({type:"success",message:"å½“å‰å›¾ç‰‡å·²ç»å®Œæˆæ ‡æ³¨"});this.$message({type:"info",message:"ç°åœ¨è¯·æ ‡è®°æ ‡ç­¾:'"+this.label[this.labelIndex].label+"'"})}},nextLabel:function(){if(this.labelCore.setLabelIndex(++this.labelIndex),this.labelIndex>=this.label.length)return this.labelIndex=this.label.length,void this.$message({type:"success",message:"å·²ç»å®Œæˆå½“å‰å›¾ç‰‡æ ‡æ³¨ï¼Œè¯·ç‚¹å‡»ä¿å­˜ç»“æŸæ ‡è®°"});this.$message({type:"info",message:"ç°åœ¨è¯·æ ‡è®°æ ‡ç­¾:'"+this.label[this.labelIndex].label+"'"})},goBack:function(){var e=this;this.$confirm("æœªä¿å­˜çš„è¿›åº¦å°†ä¼šä¸¢å¤±ï¼Œç¡®å®šè¿”å›ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){e.$router.push("/task/"+e.tid+"/"+e.taskName+"/"+e.type)}).catch(function(){})},penddingUserSelect:function(e){this.penddingUserSelectId=parseInt(e),this.getImgInfo(!0)},setFinalVersion:function(){var e,t,a,i,n=this;this.loading=!0,(e=parseInt(this.id),t=this.penddingUserSelectId,this.account,a=localStorage.getItem("group"),i=Object(s.g)(a),Object(s.e)("/api/"+i+"/setFinalVersion",{imageId:e,userConfirmId:t})).then(function(){n.$message({type:"success",message:"è®¾ç½®æœ€ç»ˆç‰ˆæœ¬æˆåŠŸ"})}).catch(function(e){n.$message({type:"error",message:"è®¾ç½®æœ€ç»ˆç‰ˆæœ¬å¤±è´¥ï¼Œ"+e.message+"("+e.code+")"})}).then(function(){n.loading=!1})},deleteImageById:function(){var e,t=this;this.loading=!0,(e=parseInt(this.id),this.penddingUserSelectId,this.account,Object(s.e)("/api/admin/deleteImageById",{imageId:e})).then(function(){t.$message({type:"success",message:"åˆ é™¤æˆåŠŸ"}),t.next()}).catch(function(e){t.$message({type:"error",message:"åˆ é™¤å¤±è´¥ï¼Œ"+e.message+"("+e.code+")"})}).then(function(){t.loading=!1})},saveLabelArea:function(e){var t=this;this.loading=!0;var a=[],i=!0,n=!1,l=void 0;try{for(var o,r=e[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var c=o.value,u=[],d=0,f=!0,p=!1,v=void 0;try{for(var m,h=c.points[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){var b=m.value;u.push({x:b[0],y:b[1],order:++d})}}catch(e){p=!0,v=e}finally{try{!f&&h.return&&h.return()}finally{if(p)throw v}}a.push({labelId:c.id,labelType:c.type,dataDesc:c.desc,iscrowd:c.iscrowd,point:u})}}catch(e){n=!0,l=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw l}}(function(e,t,a){var i=localStorage.getItem("group"),n=Object(s.g)(i),l={imageId:e,data:t};return void 0!=a&&(l.userId=a),Object(s.e)("/api/"+n+"/saveLabel",l)})(this.id,a,1==this.account.group?this.account.id:this.penddingUserSelectId,this.account).then(function(){t.$message({type:"success",message:"ä¿å­˜æˆåŠŸ"})}).catch(function(e){t.$message({type:"error",message:"ä¿å­˜å¤±è´¥ï¼Œ"+e.message+"("+e.code+")"})}).then(function(){t.loading=!1})},getImageList:function(e){var t=this;return new Promise(function(a,i){console.log(t.task.page),r(t.task.id,t.task.page).then(function(i){var n=i.data.images;if(t.task.list=n,t.task.total=i.data.totalpages,!e)for(var s=0;s<n.length;s++)n[s].imageId==t.id&&(t.task.index=s);a()}).catch(function(){t.$message({type:"error",message:"è·å–åˆ—è¡¨å¤±è´¥"}),i()})})},next:function(){var e=this,t=this.task;if(t.list.length-1==t.index){if(console.log("è¿™æ˜¯è¿™ä¸ªé¡µé¢æœ€åä¸€å¼ "),t.page==t.total)return void this.$message({type:"warning",message:"å·²ç»æ˜¯æœ€åä¸€å¼ "});console.log(t.page),t.page++,console.log(t.page),t.index=0,console.log(t.list[t.index].imageId),r(this.task.id,this.task.page).then(function(a){var i=a.data.images;e.task.list=i,console.log("success"),console.log(t.list[t.index].imageId),console.log(t.list[t.index].userConfirmId),e.$router.push("/img/"+t.list[t.index].imageId+"/"+t.id+"/"+e.type+"/"+t.name+"/"+t.page)}),console.log(t.list[t.index].imageId),console.log(t.list)}else console.log(t.list),++t.index,console.log(t.list[t.index].imageId),this.$router.push("/img/"+t.list[t.index].imageId+"/"+t.id+"/"+this.type+"/"+t.name+"/"+t.page)},previous:function(){var e=this,t=this.task;if(0==t.index){if(1==t.page)return void this.$message({type:"warning",message:"å·²ç»æ˜¯ç¬¬ä¸€å¼ "});console.log(t.page),t.page--,console.log(t.page),r(this.task.id,this.task.page).then(function(a){var i=a.data.images;e.task.list=i,t.index=t.list.length-1,console.log("success"),console.log(t.list[t.index].imageId),e.$router.push("/img/"+t.list[t.index].imageId+"/"+t.id+"/"+e.type+"/"+t.name+"/"+t.page)})}else--t.index,this.$router.push("/img/"+t.list[t.index].imageId+"/"+t.id+"/"+this.type+"/"+t.name+"/"+t.page)}},mounted:function(){this.load()}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"100%"}},[a("el-page-header",{staticClass:"page-header",attrs:{content:"æ ‡è®°"},on:{back:e.goBack}}),e._v(" "),a("div",{staticClass:"label-core",attrs:{tabindex:"1"}},[a("div",{staticClass:"label-toolbar"},[a("ul",[e._m(0),e._v(" "),e._m(1),e._v(" "),a("a",{staticClass:"polygon",style:{display:2==e.type||3==e.type||4==e.type&&this.labelIndex!=this.label.length?"block":"none"},attrs:{title:"æ·»åŠ å¤šè¾¹å½¢åŒºåŸŸ(Q)",href:"javascript:void(0)"}},[e._m(2)]),e._v(" "),a("a",{staticClass:"rectangle",style:{display:2==e.type||4==e.type&&this.labelIndex!=this.label.length?"block":"none"},attrs:{title:"æ·»åŠ æ­£æ–¹å½¢åŒºåŸŸ(R)",href:"javascript:void(0)"}},[e._m(3)]),e._v(" "),a("div",{staticClass:"label-divider"}),e._v(" "),a("a",{staticClass:"edit",style:{display:1!=e.type&&4!=e.type?"block":"none"},attrs:{title:"é‡æ–°ç¼–è¾‘åŒºåŸŸ(E)",href:"javascript:void(0)"}},[e._m(4)]),e._v(" "),1==e.type?a("a",{staticClass:"classify",attrs:{title:"æ·»åŠ åˆ†ç±»æ ‡ç­¾",href:"javascript:void(0)"},on:{click:e.classifyClick}},[e._m(5)]):e._e(),e._v(" "),4==e.type?a("a",{staticClass:"classify",attrs:{title:"ä¸‹ä¸€ä¸ªæ ‡ç­¾",href:"javascript:void(0)"},on:{click:e.nextLabel}},[e._m(6)]):e._e(),e._v(" "),a("a",{staticClass:"delete",style:{display:1!=e.type?"block":"none"},attrs:{title:"åˆ é™¤åŒºåŸŸ(D)",href:"javascript:void(0)"}},[e._m(7)]),e._v(" "),a("div",{staticClass:"label-divider"}),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),a("div",{staticClass:"label-divider"}),e._v(" "),a("a",{staticClass:"delete",style:{display:3==e.account.group?"block":"none"},attrs:{title:"åˆ é™¤",href:"javascript:void(0)"},on:{click:e.showDelete}},[e._m(10)]),e._v(" "),e._m(11),e._v(" "),a("a",{staticClass:"confirm",style:{display:2==e.account.group||3==e.account.group?"block":"none"},attrs:{title:"ç¡®è®¤è¯¥ç‰ˆæœ¬(Ctrl+C)",href:"javascript:void(0)"},on:{click:e.showComfirm}},[e._m(12)]),e._v(" "),a("div",{staticClass:"label-divider"}),e._v(" "),a("a",{staticClass:"zoomin",attrs:{title:"ä¸Šä¸€ä¸ª",href:"javascript:void(0)"},on:{click:e.previous}},[e._m(13)]),e._v(" "),a("a",{staticClass:"zoomout",attrs:{title:"ä¸‹ä¸€ä¸ª",href:"javascript:void(0)"},on:{click:e.next}},[e._m(14)])])]),e._v(" "),a("div",{staticClass:"label-area"},[a("div",{staticClass:"label-main"},[a("img",{attrs:{src:e.img,alt:"",srcset:""},on:{load:e.loadMark}}),e._v(" "),a("canvas"),e._v(" "),a("svg",{staticClass:"label-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}})])]),e._v(" "),a("div",{staticClass:"label-popup",staticStyle:{display:"none"}},[a("select",{staticClass:"label-label",attrs:{multiple:""}}),e._v(" "),e._m(15),e._v(" "),a("textarea",{staticClass:"label-desc",attrs:{rows:"5",placeholder:"æè¿°"}}),e._v(" "),a("button",{staticClass:"label-save-label",attrs:{type:"button"},on:{click:e.print}},[e._v("ä¿å­˜")]),e._v(" "),a("button",{staticClass:"label-delete-label",attrs:{type:"button"}},[e._v("åˆ é™¤")])]),e._v(" "),a("div",{staticClass:"label-list"},[a("el-collapse",{staticClass:"label-user",style:{display:1!=e.account.group?"block":"none"},model:{value:e.penddingUserActive,callback:function(t){e.penddingUserActive=t},expression:"penddingUserActive"}},[a("el-collapse-item",{staticClass:"label-user-item",attrs:{title:"å¾…å®¡æ ¸ç”¨æˆ·åˆ—è¡¨",name:"user"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex},on:{select:e.penddingUserSelect}},e._l(e.penddingUserList,function(t){return a("el-menu-item",{key:t.userId,attrs:{index:t.userId+""}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.username))])])}),1)],1)],1),e._v(" "),a("ul",{staticClass:"label-list-ul"}),e._v(" "),a("el-card",{staticClass:"box-card",attrs:{"body-style":"{ padding: '30px'}",shadow:"always"}},[null!=e.task.list[e.task.index].userConfirmId?a("div",{staticClass:"yishenghe"},[a("h3",[e._v("å·²å®¡æ ¸")])]):a("div",{staticClass:"weishenghe"},[a("h3",[e._v("æœªå®¡æ ¸")])])])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"select",attrs:{title:"é€‰æ‹©(A)",href:"javascript:void(0)"}},[t("li",{staticClass:"active"},[t("span",{staticClass:"iconfont icon-zhizhen"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"move",attrs:{title:"ç§»åŠ¨/ç¼©æ”¾(W)",href:"javascript:void(0)"}},[t("li",[t("span",{staticClass:"iconfont icon-yidong"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-duobianxing"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-kuangxuanquyu"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-sheji"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-sheji"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-nextweek"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-shanchu"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"zoomin",attrs:{title:"æ”¾å¤§(Z)",href:"javascript:void(0)"}},[t("li",[t("span",{staticClass:"iconfont icon-fangda"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"zoomout",attrs:{title:"ç¼©å°(X)",href:"javascript:void(0)"}},[t("li",[t("span",{staticClass:"iconfont icon-suoxiao"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"el-icon-circle-close"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"save",attrs:{title:"ä¿å­˜(Ctrl+S)",href:"javascript:void(0)"}},[t("li",[t("span",{staticClass:"iconfont icon-baocun"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-dui"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-ai10"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("span",{staticClass:"iconfont icon-ai09"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"label-checkbox"},[t("input",{staticClass:"label-crowd",attrs:{type:"checkbox",value:"iscrowd"}}),this._v(" "),t("label",{attrs:{for:"iscrowd"}},[this._v("ä½¿ç”¨RLEæ ¼å¼")])])}]};var T=a("C7Lr")(C,I,!1,function(e){a("nKMq")},null,null).exports,E=a("JpkI"),$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"100%"}},[a("el-page-header",{staticClass:"page-header",attrs:{content:"è§†é¢‘æ ‡è®°"},on:{back:e.goBack}}),e._v(" "),a("div",{staticClass:"label-video"},[a("div",{staticClass:"bfplayer",attrs:{tabindex:"0"}},[a("div",{staticClass:"bf-loading",staticStyle:{display:"none"}}),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"bf-capture"},[e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),a("div",{staticClass:"bf-btn bf-tooltip bf-tooltip-left",style:{display:2==e.account.group||3==e.account.group?"block":"none"},attrs:{role:"buttom","data-tooltip":"ç¡®è®¤æœ€ç»ˆç‰ˆæœ¬"},on:{click:e.setFinalVersion}},[a("span",{staticClass:"bf-icon bf-icon-wancheng"})])]),e._v(" "),e._m(4),e._v(" "),e._m(5)]),e._v(" "),a("div",{staticClass:"label-right"},[a("div",{staticClass:"label-list"},[a("el-collapse",{staticClass:"label-user",style:{display:1!=e.account.group?"block":"none"},model:{value:e.penddingUserActive,callback:function(t){e.penddingUserActive=t},expression:"penddingUserActive"}},[a("el-collapse-item",{staticClass:"label-user-item",attrs:{title:"å¾…å®¡æ ¸ç”¨æˆ·åˆ—è¡¨",name:"user"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex},on:{select:e.penddingUserSelect}},e._l(e.penddingUserList,function(t){return a("el-menu-item",{key:t.userId,attrs:{index:t.userId+""}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.username))])])}),1)],1)],1),e._v(" "),a("ul",{staticClass:"label-list-ul"})],1)]),e._v(" "),e._m(6)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bf-main"},[t("div",{staticClass:"bf-loading-panel"},[t("div",{staticClass:"bf-loading"},[t("div",{staticClass:"bf-ball bf-ball-1"}),this._v(" "),t("div",{staticClass:"bf-ball bf-ball-2"}),this._v(" "),t("div",{staticClass:"bf-ball bf-ball-3"}),this._v(" "),t("div",{staticClass:"bf-ball bf-ball-4"}),this._v(" "),t("div",{staticClass:"bf-ball bf-ball-5"})])]),this._v(" "),t("video",{staticClass:"bf-video",attrs:{src:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bf-btn bf-btn-start bf-tooltip bf-tooltip-left",attrs:{role:"buttom","data-tooltip":"è®¾ç½®èµ·ç‚¹"}},[t("span",{staticClass:"bf-icon bf-icon-xiazai"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bf-btn bf-btn-end bf-tooltip bf-tooltip-left",attrs:{role:"buttom","data-tooltip":"è®¾ç½®ç»ˆç‚¹"}},[t("span",{staticClass:"bf-icon bf-icon-shangchuan"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bf-btn bf-btn-save bf-tooltip bf-tooltip-left",attrs:{role:"buttom","data-tooltip":"ä¿å­˜æ ‡è®°"}},[t("span",{staticClass:"bf-icon bf-icon-save"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bf-menu",staticStyle:{display:"none",left:"0",top:"0"}},[t("ul",[t("li",[t("div",[this._v("\n              BFPlayer-Core By q6q64399\n            ")])]),this._v(" "),t("li",[t("div",[this._v("\n              1.1.055 (2019/10/13 22:53:25)\n            ")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bf-controller"},[a("div",{staticClass:"bf-pgb-player"},[a("div",{staticClass:"bf-pgb-point",staticStyle:{display:"none"}},[a("div")]),e._v(" "),a("div",{staticClass:"bf-pgb-buffer"}),e._v(" "),a("div",{staticClass:"bf-pgb-played"}),e._v(" "),a("div",{staticClass:"bf-pgb-select"})]),e._v(" "),a("div",{staticClass:"bf-top"},[a("div",{staticClass:"bf-btn bf-btn-play",attrs:{role:"buttom"}},[a("span",{staticClass:"bf-icon bf-icon-play"})]),e._v(" "),a("div",{staticClass:"bf-btn bf-btn-previous bf-tooltip",attrs:{role:"buttom","data-tooltip":"ä¸Šä¸€ä¸ª"}},[a("span",{staticClass:"bf-icon bf-icon-previous"})]),e._v(" "),a("div",{staticClass:"bf-btn bf-btn-next bf-tooltip",attrs:{role:"buttom","data-tooltip":"ä¸‹ä¸€ä¸ª"}},[a("span",{staticClass:"bf-icon bf-icon-next"})]),e._v(" "),a("div",{staticClass:"bf-btn bf-btn-volume",attrs:{role:"buttom"}},[a("span",{staticClass:"bf-icon bf-icon-volumeup"})]),e._v(" "),a("div",{staticClass:"bf-volume-area",staticStyle:{display:"none"}},[a("div",{staticClass:"bf-volume"},[a("div",{staticClass:"bf-volume-value",staticStyle:{width:"100%"}}),e._v(" "),a("div",{staticClass:"bf-volume-point",staticStyle:{left:"100%"}})])]),e._v(" "),a("span",{staticClass:"bf-label-time"},[e._v("0:00 / 0:00")]),e._v(" "),a("span",{staticClass:"bf-label-select-time",staticStyle:{display:"none"}},[e._v("å·²é€‰æ‹©ï¼šdd - dd")]),e._v(" "),a("div",{staticClass:"bf-spacer"}),e._v(" "),a("div",{staticClass:"bf-selector bf-selector-quality",attrs:{"data-selector-event":"changeRate","data-selector":'[{"name":"0.5x","value":"0.5"},{"name":"0.75x","value":"0.75"},{"name":"1x","value":"1","active":1},{"name":"1.25x","value":"1.25"},{"name":"1.5x","value":"1.5"},{"name":"2x","value":"2"}]'}},[e._v("\n            å€é€Ÿ\n          ")]),e._v(" "),a("div",{staticClass:"bf-btn bf-btn-fullbrowser bf-tooltip",attrs:{role:"buttom","data-tooltip":"ç½‘é¡µå…¨å±"}},[a("span",{staticClass:"bf-icon bf-icon-mini"})]),e._v(" "),a("div",{staticClass:"bf-btn bf-btn-fullscreen bf-tooltip",attrs:{role:"buttom","data-tooltip":"å±å¹•å…¨å±"}},[a("span",{staticClass:"bf-icon bf-icon-fullscreen"})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"label-sign",staticStyle:{display:"none"}},[t("div",{staticClass:"label-sign-question"},[this._v("\n        æ·»åŠ æè¿°\n      ")]),this._v(" "),t("div",{staticClass:"label-sign-answer"},[t("select",{staticClass:"label-sign-selector",staticStyle:{display:"none"}}),this._v(" "),t("textarea",{staticClass:"label-sign-text"})]),this._v(" "),t("div",{staticClass:"label-sign-bottom"},[t("button",{staticClass:"label-sign-btn label-sign-submit",attrs:{type:"button"}},[this._v("ä¿å­˜")]),this._v(" "),t("button",{staticClass:"label-sign-btn label-sign-cancel",attrs:{type:"button"}},[this._v("å–æ¶ˆ")])])])}]};var q=function(e){a("UuF2"),a("w7C3")},A=a("C7Lr")(E.a,$,!1,q,null,null).exports,V={name:"Labelset",data:function(){return{form:{question:"",type:1,selector:""},rules:{question:[{required:!0,message:"è¯·é€‰æ‹©é¢„è®¾æè¿°",trigger:"change"}],type:[{required:!0,message:"è¯·é€‰æ‹©ç±»å‹",trigger:"blur"}],selector:[{required:!0,message:"è¯·è¾“å…¥é€‰æ‹©é¡¹",trigger:"change"}]},labelData:[],dialogVisible:!1,editId:0,type:"add",loading:!1,account:this.global.account,search:"",tempLabelData:[]}},watch:{search:function(){var e=this.search.toLowerCase();if(""!=e){var t=this.tempLabelData.filter(function(t){return null!=t.question&&-1!=t.question.toLowerCase().indexOf(e)});this.labelData=t}else this.labelData=this.tempLabelData}},methods:{showList:function(){var e=this;this.search="",this.loading=!0,w.a.getLabelList().then(function(t){e.labelData=t.data,e.tempLabelData=t.data}).catch(function(t){e.$message({type:"error",message:"è·å–æ ‡ç­¾åˆ—è¡¨å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1})},addLabelBtn:function(){this.type="add",this.dialogVisible=!0,this.form={question:"",type:1,selector:""}},editLabel:function(e){this.type="edit",this.editId=e.labelId,this.form.question=e.question,this.form.type=e.type,this.form.selector=this.parserSelector(e.selector),this.dialogVisible=!0},deleteLabel:function(e){var t=this;this.loading=!0,w.a.deleteLabel(e.labelId,this.account).then(function(){t.$message({type:"success",message:'åˆ é™¤æ ‡ç­¾"'+e.question+'"æˆåŠŸ'})}).catch(function(a){t.$message({type:"error",message:'åˆ é™¤æ ‡ç­¾"'+e.question+'"å¤±è´¥,'+a.message+"("+a.code+")"})}).then(function(){t.loading=!1}),this.showList()},addLabel:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,("add"==e.type?w.a.addLabel(e.form.type,e.form.question,e.parserSelector(e.form.selector,!0)):w.a.editLabel(e.editId,e.form.type,e.form.question,e.parserSelector(e.form.selector,!0))).then(function(){e.$message({type:"success",message:("add"==e.type?"æ·»åŠ ":"ä¿®æ”¹")+"æ ‡ç­¾æˆåŠŸ"})}).catch(function(t){e.$message({type:"error",message:("add"==e.type?"æ·»åŠ ":"ä¿®æ”¹")+"æ ‡ç­¾å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.dialogVisible=!1,e.loading=!1,e.showList()})})},parserSelector:function(e,t){if(t)return e.split(",");if(console.log(e),""==e)return null;for(var a="",i=0;i<e.length;i++)a+=e[i]+(i!=e.length-1?",":"");return a}},mounted:function(){this.showList()}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addLabelBtn}},[e._v("æ·»åŠ æ ‡ç­¾")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:e.showList}},[e._v("åˆ·æ–°åˆ—è¡¨")]),e._v(" "),a("el-input",{staticClass:"search",attrs:{"prefix-icon":"el-icon-search",placeholder:"æœç´¢æ ‡ç­¾"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.labelData,stripe:""}},[a("el-table-column",{attrs:{prop:"type",label:"ç±»å‹"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.type?"ç©ºç™½":1==t.row.type?"å¡«ç©º":"é€‰æ‹©"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"question","min-width":"100",label:"é¢„è®¾æè¿°"}}),e._v(" "),a("el-table-column",{attrs:{prop:"selector",label:"é€‰æ‹©é¡¹"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.selector?"æ— ":e.parserSelector(t.row.selector)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"æ“ä½œ",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.row.type?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editLabel(t.row)}}},[e._v("ç¼–è¾‘")]):e._e(),e._v(" "),0!=t.row.type?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteLabel(t.row)}}},[e._v("åˆ é™¤")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"æ·»åŠ /ç¼–è¾‘æ ‡ç­¾",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,"hide-required-asterisk":!0,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"ç±»å‹",prop:"type"}},[a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©ç±»å‹"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"å¡«ç©º",value:1}}),e._v(" "),a("el-option",{attrs:{label:"é€‰æ‹©",value:2}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"é¢„è®¾æè¿°",prop:"question"}},[a("el-input",{attrs:{placeholder:"é¢„è®¾æè¿°ï¼Œç”¨'$'ä»£è¡¨ç©ºæ ¼é¡¹"},model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),e._v(" "),2==e.form.type?a("el-form-item",{attrs:{label:"é€‰æ‹©é¡¹",prop:"selector"}},[a("el-input",{attrs:{placeholder:"è¾“å…¥é€‰æ‹©é¡¹ï¼Œç”¨','åˆ†å‰²"},model:{value:e.form.selector,callback:function(t){e.$set(e.form,"selector",t)},expression:"form.selector"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addLabel}},[e._v("ç¡® å®š")])],1)],1)],1)},staticRenderFns:[]};var O=a("C7Lr")(V,j,!1,function(e){a("XhWt")},"data-v-129746be",null).exports;var N={data:function(){return{dialogVisible:!1,type:"add",editId:0,userData:[],tempUserData:[],form:{username:"",password:"",group:""},rules:{username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"}],group:[{required:!0,message:"è¯·é€‰æ‹©ç”¨æˆ·ç»„",trigger:"change"}]},loading:!1,account:this.global.account,search:""}},watch:{search:function(){var e=this.search.toLowerCase();if(""!=e){var t=this.tempUserData.filter(function(t){return-1!=t.username.toLowerCase().indexOf(e)});this.userData=t}else this.userData=this.tempUserData}},methods:{editUser:function(e){var t=[e.username,e.password,e.authorities];this.form.username=t[0],this.form.password=t[1],this.form.group=t[2];var a=[!0,"edit",e.userId];this.dialogVisible=a[0],this.type=a[1],this.editId=a[2]},deleteUser:function(e){var t,a=this;(t=e.userId,this.account,Object(s.e)("/api/admin/deleteUser",{userId:t})).then(function(){a.$message({type:"success",message:"åˆ é™¤ç”¨æˆ·æˆåŠŸ"}),a.showList()}).catch(function(e){a.$message({type:"error",message:"åˆ é™¤ç”¨æˆ·å¤±è´¥,"+e.message+"("+e.code+")"})})},filterTag:function(e,t){return t.authorities==e},addUser:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var a,i,n,l;e.dialogVisible=!1,e.loading=!0,(a=e.form.username,i=e.form.password,n=e.form.group,l="add"==e.type?void 0:e.editId,e.account,l?Object(s.e)("/api/admin/editUser",{userId:l,username:a,password:i,authorities:n}):Object(s.e)("/api/admin/addUser",{username:a,password:i,authorities:n})).then(function(t){e.$message({type:"success",message:("add"==e.type?"æ·»åŠ ":"ä¿®æ”¹")+"æ–°ç”¨æˆ·æˆåŠŸ"});var a=["","",""];e.form.username=a[0],e.form.password=a[1],e.form.group=a[2]}).catch(function(t){e.$message({type:"error",message:("add"==e.type?"æ·»åŠ ":"ä¿®æ”¹")+"ç”¨æˆ·å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1,e.showList()})})},addUserBtn:function(){var e=["","",""];this.form.username=e[0],this.form.password=e[1],this.form.group=e[2];var t=[!0,"add"];this.dialogVisible=t[0],this.type=t[1]},showList:function(){var e=this;this.loading=!0,(this.account,Object(s.c)("/api/admin/getUserList")).then(function(t){e.userData=t.data.userList,e.tempUserData=t.data.userList}).catch(function(t){e.$message({type:"error",message:"è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1})}},mounted:function(){this.showList()}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addUserBtn}},[e._v("æ·»åŠ ç”¨æˆ·")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:e.showList}},[e._v("åˆ·æ–°åˆ—è¡¨")]),e._v(" "),a("el-input",{staticClass:"search",attrs:{"prefix-icon":"el-icon-search",placeholder:"æœç´¢ç”¨æˆ·"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.userData,stripe:""}},[a("el-table-column",{attrs:{prop:"username","min-width":"100",label:"ç”¨æˆ·å"}}),e._v(" "),a("el-table-column",{attrs:{prop:"password","min-width":"100",label:"å¯†ç "}}),e._v(" "),a("el-table-column",{attrs:{filters:[{text:"ç”¨æˆ·",value:"ROLE_USER"},{text:"å®¡æ ¸",value:"ROLE_REVIEWER"},{text:"ç®¡ç†",value:"ROLE_ADMIN"}],"filter-method":e.filterTag,"filter-placement":"bottom-end",prop:"authorities",label:"ç”¨æˆ·ç»„åˆ«",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"ROLE_USER"==t.row.authorities?"primary":"success","disable-transitions":""}},[e._v(e._s("ROLE_USER"==t.row.authorities?"ç”¨æˆ·":"ROLE_REVIEWER"==t.row.authorities?"å®¡æ ¸":"ç®¡ç†"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"æ“ä½œ",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return["ROLE_ADMIN"!=t.row.authorities?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editUser(t.row)}}},[e._v("ç¼–è¾‘")]):e._e(),e._v(" "),"ROLE_ADMIN"!=t.row.authorities?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("åˆ é™¤")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"æ·»åŠ ç”¨æˆ·",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,"hide-required-asterisk":!0,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"ç”¨æˆ·å",prop:"username"}},[a("el-input",{attrs:{placeholder:"ç”¨æˆ·å"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"å¯†ç ",prop:"password"}},[a("el-input",{attrs:{placeholder:"å¯†ç ","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ç”¨æˆ·ç»„",prop:"group"}},[a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©ç”¨æˆ·ç»„"},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}},[a("el-option",{attrs:{label:"ç”¨æˆ·",value:"ROLE_USER"}}),e._v(" "),a("el-option",{attrs:{label:"å®¡æ ¸",value:"ROLE_REVIEWER"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("ç¡® å®š")])],1)],1)],1)},staticRenderFns:[]};var U=a("C7Lr")(N,D,!1,function(e){a("tCEz")},"data-v-652856e6",null).exports;var R={name:"Labelset",data:function(){return{form:{label:"",color:"#3498db"},defaultColor:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#f1c40f","#e67e22","#e74c3c","#95a5a6"],rules:{label:[{required:!0,message:"è¯·è¾“å…¥åç§°",trigger:"blur"}],type:[{required:!0,message:"è¯·é€‰æ‹©æ ‡ç­¾ç±»å‹",trigger:"change"}],color:[{required:!0,message:"è¯·é€‰æ‹©ä¸€ä¸ªé¢œè‰²",trigger:"change"}]},labelData:[],dialogVisible:!1,editId:0,type:"add",loading:!1,account:this.global.account,search:"",tempLabelData:[]}},watch:{search:function(){var e=this.search.toLowerCase();if(""!=e){var t=this.tempLabelData.filter(function(t){return-1!=t.labelName.toLowerCase().indexOf(e)});this.labelData=t}else this.labelData=this.tempLabelData}},methods:{showList:function(){var e=this;this.search="",this.loading=!0,(this.account,Object(s.c)("/api/admin/getLabelList")).then(function(t){e.labelData=t.data.labelList,e.tempLabelData=t.data.labelList}).catch(function(t){e.$message({type:"error",message:"è·å–æ ‡ç­¾åˆ—è¡¨å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1})},addLabelBtn:function(){this.type="add",this.dialogVisible=!0,this.form.label="",this.form.color="#3498db"},editLabel:function(e){this.type="edit",this.editId=e.labelId,this.form.label=e.labelName,this.form.color=e.labelColor,this.dialogVisible=!0},deleteLabel:function(e){var t,a=this;this.loading=!0,(t=e.labelId,this.account,Object(s.e)("/api/admin/deleteLabel",{labelId:t})).then(function(){a.$message({type:"success",message:'åˆ é™¤æ ‡ç­¾"'+e.labelName+'"æˆåŠŸ'})}).catch(function(t){a.$message({type:"error",message:'åˆ é™¤æ ‡ç­¾"'+e.labelName+'"å¤±è´¥,'+t.message+"("+t.code+")"})}).then(function(){a.loading=!1}),this.showList()},addLabel:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var a,i,n;e.loading=!0,("add"==e.type?(a=e.form.label,i=0,n=e.form.color,e.account,Object(s.e)("/api/admin/addLabel",{labelName:a,labelType:i,labelColor:n})):function(e,t,a,i){return Object(s.e)("/api/admin/editLabel",{labelId:e,labelName:t,labelType:a,labelColor:i})}(e.editId,e.form.label,0,e.form.color,e.account)).then(function(){e.$message({type:"success",message:("add"==e.type?"æ·»åŠ ":"ä¿®æ”¹")+"æ ‡ç­¾æˆåŠŸ"})}).catch(function(t){e.$message({type:"error",message:("add"==e.type?"æ·»åŠ ":"ä¿®æ”¹")+"æ ‡ç­¾å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.dialogVisible=!1,e.loading=!1,e.showList()})})}},mounted:function(){this.showList()}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addLabelBtn}},[e._v("æ·»åŠ æ ‡ç­¾")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:e.showList}},[e._v("åˆ·æ–°åˆ—è¡¨")]),e._v(" "),a("el-input",{staticClass:"search",attrs:{"prefix-icon":"el-icon-search",placeholder:"æœç´¢æ ‡ç­¾"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.labelData,stripe:""}},[a("el-table-column",{attrs:{prop:"labelName","min-width":"100",label:"åç§°"}}),e._v(" "),a("el-table-column",{attrs:{prop:"labelColor",label:"é¢œè‰²"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"label-color",style:"background-color:"+t.row.labelColor}),e._v(" "),a("span",[e._v(e._s(t.row.labelColor))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"æ“ä½œ",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editLabel(t.row)}}},[e._v("ç¼–è¾‘")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteLabel(t.row)}}},[e._v("åˆ é™¤")])]}}])})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"æ·»åŠ /ç¼–è¾‘æ ‡ç­¾",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,"hide-required-asterisk":!0,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"æ ‡ç­¾åç§°",prop:"label"}},[a("el-input",{attrs:{placeholder:"æ ‡ç­¾åç§°"},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"é¢œè‰²",prop:"color"}},[a("el-color-picker",{attrs:{"color-format":"hex",predefine:e.defaultColor},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addLabel}},[e._v("ç¡® å®š")])],1)],1)],1)},staticRenderFns:[]};var P=a("C7Lr")(R,M,!1,function(e){a("g0hY")},"data-v-55df3269",null).exports;function z(e,t,a,i,n){return Object(s.e)("/api/admin/updateTask",{taskId:e,taskName:t,userIds:a,labelIds:i,reviewerIds:n,taskDesc:""})}var B={getTaskList:function(e){var t={page:e||1,limit:30};return Object(s.e)("/api/admin/getTaskList",t)},getLabelList:function(e,t){console.log("TaskType:"+e);var a={},i=!0,n=!1,l=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var c=o.value;a[c+""]=!0}}catch(e){n=!0,l=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw l}}return new Promise(function(t,i){(5!=e?Object(s.c)("/api/admin/getLabelList"):Object(s.c)("/api/admin/getVideoLabelList")).then(function(i){var n=5!=e?i.data.labelList:i.data,s=[],l=!0,o=!1,r=void 0;try{for(var c,u=n[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;5!=e?s.push({labelId:d.labelId,labelName:d.labelName,join:1==a[d.labelId+""]}):s.push({labelId:d.labelId,question:d.question,type:d.type,join:1==a[d.labelId+""]})}}catch(e){o=!0,r=e}finally{try{!l&&u.return&&u.return()}finally{if(o)throw r}}t(s)}).catch(function(e){i(e)})})},getList:function(e,t){var a=e.taskId,i={};console.log(e);var n=!0,l=!1,o=void 0;try{for(var r,c=("User"==t?e.userIds:e.reviewerIds)[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var u=r.value;i[u+""]=!0}}catch(e){l=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(l)throw o}}return new Promise(function(e,n){Object(s.e)("/api/admin/getList"+t,{taskId:a}).then(function(t){var a=[],n=!0,s=!1,l=void 0;try{for(var o,r=t.data[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var c=o.value;a.push({userId:c.userId,username:c.username,join:1==i[c.userId]})}}catch(e){s=!0,l=e}finally{try{!n&&r.return&&r.return()}finally{if(s)throw l}}e(a)}).catch(function(e){n(e)})})},setReviewer:function(e,t){var a=[],i=!0,n=!1,s=void 0;try{for(var l,o=t[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var r=l.value;a.push(r.userId)}}catch(e){n=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw s}}return z(e.taskId,e.taskName,e.userIds,e.labelIds,a)},setUser:function(e,t){var a=[],i=!0,n=!1,s=void 0;try{for(var l,o=t[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var r=l.value;a.push(r.userId)}}catch(e){n=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw s}}return z(e.taskId,e.taskName,a,e.labelIds,e.reviewerIds)},setLabel:function(e,t){var a=[],i=!0,n=!1,s=void 0;try{for(var l,o=t[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var r=l.value;a.push(r.labelId)}}catch(e){n=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw s}}return z(e.taskId,e.taskName,e.userIds,a,e.reviewerIds)},splitTask:function(e,t){return Object(s.e)("/api/admin/splitTask",{taskId:e,quantity:t})},deleteTask:function(e){return Object(s.e)("/api/admin/deleteTask",{taskId:e})},updateTaskType:function(e){return new Promise(function(t,a){var i=0,n=function(n){Object(s.e)("/api/admin/updateTaskType",{taskId:n.taskId,taskType:n.taskType}).then(function(){++i==e.length&&t()}).catch(function(e){console.error(e),a({code:e.code,message:"å¤„ç†taskId:'"+n.taskId+"'å‡ºç°é”™è¯¯:"+e.message})})},l=!0,o=!1,r=void 0;try{for(var c,u=e[Symbol.iterator]();!(l=(c=u.next()).done);l=!0)n(c.value)}catch(e){o=!0,r=e}finally{try{!l&&u.return&&u.return()}finally{if(o)throw r}}})},getNewTaskList:function(){return Object(s.c)("/api/admin/getNewTaskList")},search:function(e){var t={keyword:e};return Object(s.e)("/api/admin/searchTask",t)}},F={name:"partition",data:function(){return{taskData:this.global.task,userSelect:{dialogVisible:!1,tableData:[],tableSelect:[],type:"user",taskItem:[],loading:!1},labelSelect:{dialogVisible:!1,tableData:[],tableSelect:[],index:[],taskItem:[],loading:!1},typeSelect:{dialogVisible:!1,select:"",taskItem:null,loading:!1},newTask:{list:[],dialogVisible:!1,loading:!1,type:[{value:1,label:"åˆ†ç±»"},{value:2,label:"æ£€æµ‹"},{value:3,label:"åˆ†å‰²"},{value:4,label:"å…³é”®ç‚¹"}]},account:this.global.account,loading:!1,split:{dialogVisible:!1,count:2,item:""},page:{now:1,total:1},search:""}},methods:{newTaskAdd:function(){var e=this;this.newTask.dialogVisible=!0,this.newTask.loading=!0,B.getNewTaskList().then(function(t){e.newTask.list=t.data.taskList,e.newTask.loading=!1}).catch(function(t){e.$message({type:"error",message:"è·å–åˆ—è¡¨å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.newTask.loading=!1})},newTaskAddSubmit:function(){var e=this;this.newTask.loading=!0,B.updateTaskType(this.newTask.list).then(function(){e.$message({type:"success",message:"æ·»åŠ æˆåŠŸ"}),e.typeSelect.dialogVisible=!1,e.showList()}).catch(function(t){e.$message({type:"error",message:"æ·»åŠ å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.newTask.loading=!1})},typeSubmit:function(){var e=this;this.typeSelect.loading=!0,B.updateTaskType([{taskId:this.typeSelect.taskItem.taskId,taskType:this.typeSelect.select}]).then(function(){e.$message({type:"success",message:"æ·»åŠ æˆåŠŸ"}),e.typeSelect.dialogVisible=!1,e.showList()}).catch(function(t){e.$message({type:"error",message:"æ·»åŠ å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.typeSelect.loading=!1})},showList:function(){var e=this;this.loading=!0,B.getTaskList(this.page.now).then(function(t){e.page.total=t.data.totalpages?t.data.totalpages:1,e.global.task.list=t.data.taskList}).catch(function(t){e.$message({type:"error",message:"è·å–åˆ—è¡¨å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1})},searchClick:function(){var e=this;this.page.now=1,""!=this.search?(this.loading=!0,B.search(this.search).then(function(t){e.global.task.list=t.data}).catch(function(t){e.$message({type:"error",message:"æœç´¢å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1})):this.showList()},editUser:function(e){var t=[!0,"user",e];this.userSelect.dialogVisible=t[0],this.userSelect.type=t[1],this.userSelect.taskItem=t[2]},editReviewer:function(e){var t=[!0,"reviewer",e];this.userSelect.dialogVisible=t[0],this.userSelect.type=t[1],this.userSelect.taskItem=t[2]},editLabel:function(e){var t=[!0,e];this.labelSelect.dialogVisible=t[0],this.labelSelect.taskItem=t[1]},editType:function(e){var t=[!0,e,e.taskType];this.typeSelect.dialogVisible=t[0],this.typeSelect.taskItem=t[1],this.typeSelect.select=t[2]},setUserTable:function(){var e=this;this.loading=!0,this.userSelect.dialogVisible=!1,("user"==this.userSelect.type?B.setUser(this.userSelect.taskItem,this.userSelect.tableSelect,this.account):B.setReviewer(this.userSelect.taskItem,this.userSelect.tableSelect,this.account)).then(function(){e.$message({type:"success",message:"ä¿å­˜æˆåŠŸ"})}).catch(function(t){e.$message({type:"error",message:"ä¿å­˜å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1,e.showList()})},openUserDialog:function(){var e=this;this.$nextTick(function(){e.userSelect.loading=!0,B.getList(e.userSelect.taskItem,"reviewer"==e.userSelect.type?"Reviewer":"User").then(function(t){e.userSelect.tableData=t,e.$nextTick(function(){e.userSelect.tableSelect=[];var a=!0,i=!1,n=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;o.join?e.$refs.table.toggleRowSelection(o,!0):e.$refs.table.toggleRowSelection(o,!1)}}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}})}).catch(function(t){e.$message({type:"error",message:"è·å–å¸å·åˆ—è¡¨å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.userSelect.loading=!1})})},handleSelectionChange:function(e){this.userSelect.tableSelect=e},setLabelTable:function(){var e=this;this.loading=!0,this.labelSelect.dialogVisible=!1,console.log(this.labelSelect.tableSelect),B.setLabel(this.labelSelect.taskItem,this.labelSelect.tableSelect,this.account).then(function(){e.$message({type:"success",message:"ä¿å­˜æˆåŠŸ"})}).catch(function(t){e.$message({type:"error",message:"ä¿å­˜å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.loading=!1,e.showList()})},labelSelectionChange:function(e){if(5==this.labelSelect.taskItem.taskType&&e.length>1)return this.$message({type:"error",message:"åªå¯é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿"}),this.$refs.labelTable.toggleRowSelection(this.labelSelect.tableSelect[0]),this.labelSelect.tableSelect=[this.labelSelect.tableSelect[this.labelSelect.tableSelect.length-1]],!1;if(this.labelSelect.index=[],4==this.labelSelect.taskItem.taskType){var t=1,a=!0,i=!1,n=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;this.labelSelect.index[o.labelName]=t++}}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}}this.labelSelect.tableSelect=e},openSelectDialog:function(){var e=this;this.$nextTick(function(){e.labelSelect.loading=!0,B.getLabelList(e.labelSelect.taskItem.taskType,e.labelSelect.taskItem.labelIds).then(function(t){e.labelSelect.tableData=t,e.$nextTick(function(){e.labelSelect.tableSelect=[];var a=!0,i=!1,n=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;o.join?e.$refs.labelTable.toggleRowSelection(o,!0):e.$refs.labelTable.toggleRowSelection(o,!1)}}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}})}).catch(function(t){e.$message({type:"error",message:"è·å–æ ‡ç­¾å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.labelSelect.loading=!1})})},splitTask:function(e){e.imageNumber<=1?this.$alert("è¯¥ä»»åŠ¡åªå­˜åœ¨ä¸€é¡¹é¡¹ç›®ï¼Œæ— æ³•ç»§ç»­åˆ†å‰²","å‡ºç°é”™è¯¯",{confirmButtonText:"ç¡®å®š"}):(this.split.item=e,this.split.dialogVisible=!0)},splitSubmit:function(){var e=this;this.loading=!0,B.splitTask(this.split.item.taskId,this.split.count,this.account).then(function(){e.$message({type:"success",message:"æ‹†åˆ†æˆåŠŸ"})}).catch(function(t){e.$message({type:"error",message:"æ‹†åˆ†å¤±è´¥,"+t.message+"("+t.code+")"})}).then(function(){e.split.dialogVisible=!1,e.showList()})},deleteTask:function(e){var t=this;this.$confirm("å°†æ°¸ä¹…åˆ é™¤æ•°æ®, æ˜¯å¦ç»§ç»­?","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){t.loading=!0,B.deleteTask(e.taskId,t.account).then(function(){t.$message({type:"success",message:"åˆ é™¤æˆåŠŸ"})}).catch(function(e){t.$message({type:"error",message:"åˆ é™¤æˆåŠŸå¤±è´¥,"+e.message+"("+e.code+")"})}).then(function(){t.loading=!1,t.showList()})})},getTypeName:function(e){switch(e){case 1:return"åˆ†ç±»";case 2:return"æ£€æµ‹";case 3:return"åˆ†å‰²";case 4:return"å…³é”®ç‚¹æ£€æµ‹";case 5:return"è§†é¢‘æè¿°";default:return"æœªçŸ¥ç±»å‹"}},filterTag:function(e,t){return t.taskType==e},pageChange:function(e){this.showList()}},mounted:function(){this.showList()}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.newTaskAdd}},[e._v("æ·»åŠ ä»»åŠ¡")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:e.showList}},[e._v("åˆ·æ–°åˆ—è¡¨")]),e._v(" "),a("el-input",{staticClass:"search",attrs:{"prefix-icon":"el-icon-search",placeholder:"æœç´¢ä»»åŠ¡ï¼ˆå›è½¦ç¡®è®¤ï¼‰"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClick(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.taskData.list,stripe:""}},[a("el-table-column",{attrs:{filters:[{text:"åˆ†ç±»",value:"1"},{text:"æ£€æµ‹",value:"2"},{text:"åˆ†å‰²",value:"3"},{text:"å…³é”®ç‚¹æ£€æµ‹",value:"4"},{text:"è§†é¢‘æè¿°",value:"5"}],"filter-method":e.filterTag,"filter-placement":"bottom-end",prop:"authorities",label:"ç±»å‹",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.getTypeName(t.row.taskType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskName","min-width":"100",label:"ä»»åŠ¡å"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"æ“ä½œ",width:"530"},scopedSlots:e._u([{key:"default",fn:function(t){return[5!=t.row.taskType?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editType(t.row)}}},[e._v("é€‰æ‹©ç±»å‹")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editUser(t.row)}}},[e._v("é€‰æ‹©ç”¨æˆ·")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editReviewer(t.row)}}},[e._v("é€‰æ‹©å®¡æ ¸")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editLabel(t.row)}}},[e._v("é€‰æ‹©æ ‡ç­¾")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.splitTask(t.row)}}},[e._v("æ‹†åˆ†")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteTask(t.row)}}},[e._v("åˆ é™¤")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"user"==e.userSelect.type?"é€‰æ‹©ç”¨æˆ·":"é€‰æ‹©å®¡æ ¸",visible:e.userSelect.dialogVisible,width:"400px"},on:{"update:visible":function(t){return e.$set(e.userSelect,"dialogVisible",t)},open:e.openUserDialog}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userSelect.loading,expression:"userSelect.loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.userSelect.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"join",type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ç”¨æˆ·å",prop:"username"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userSelect.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.setUserTable}},[e._v("ç¡® å®š")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"é€‰æ‹©æ ‡ç­¾",visible:e.labelSelect.dialogVisible,width:"400px"},on:{"update:visible":function(t){return e.$set(e.labelSelect,"dialogVisible",t)},open:e.openSelectDialog}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.labelSelect.loading,expression:"labelSelect.loading"}],ref:"labelTable",staticStyle:{width:"100%"},attrs:{data:e.labelSelect.tableData},on:{"selection-change":e.labelSelectionChange}},[a("el-table-column",{attrs:{prop:"join",type:"selection",width:"55"}}),e._v(" "),5!=e.labelSelect.taskItem.taskType?[a("el-table-column",{attrs:{label:"æ ‡ç­¾åç§°",prop:"labelName"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.labelSelect.index[t.row.labelName]?a("el-tag",{staticClass:"task-tag",attrs:{effect:"plain",size:"mini"}},[e._v(e._s(e.labelSelect.index[t.row.labelName]))]):e._e(),e._v(e._s(t.row.labelName)+"\n          ")]}}],null,!1,883129105)})]:[a("el-table-column",{attrs:{label:"ç±»å‹",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.type?"ç©ºç™½":1==t.row.type?"å¡«ç©º":"é€‰æ‹©"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"æè¿°",prop:"question"}})]],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.labelSelect.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.setLabelTable}},[e._v("ç¡® å®š")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"ä»»åŠ¡æ‹†åˆ†",visible:e.split.dialogVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.split,"dialogVisible",t)}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"æ‹†åˆ†æ•°é‡"}},[a("el-input-number",{attrs:{min:2,max:e.split.item.imageNumber,step:1,"step-strictly":""},model:{value:e.split.count,callback:function(t){e.$set(e.split,"count",t)},expression:"split.count"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.split.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.splitSubmit}},[e._v("ç¡® å®š")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.typeSelect.loading,expression:"typeSelect.loading"}],attrs:{title:"ä»»åŠ¡ç±»å‹",visible:e.typeSelect.dialogVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.typeSelect,"dialogVisible",t)}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"ç±»å‹",prop:"group"}},[a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©ä»»åŠ¡ç±»å‹"},model:{value:e.typeSelect.select,callback:function(t){e.$set(e.typeSelect,"select",t)},expression:"typeSelect.select"}},e._l(e.newTask.type,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.typeSelect.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.typeSubmit}},[e._v("ç¡® å®š")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.newTask.loading,expression:"newTask.loading"}],attrs:{title:"å¯¼å…¥æ–°ä»»åŠ¡",visible:e.newTask.dialogVisible,width:"60%"},on:{"update:visible":function(t){return e.$set(e.newTask,"dialogVisible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.newTask.list,stripe:""}},[a("el-table-column",{attrs:{prop:"taskName","min-width":"100",label:"ä»»åŠ¡å"}}),e._v(" "),a("el-table-column",{attrs:{label:"è®¾ç½®ç±»å‹",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[5!=t.row.taskType?a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©"},model:{value:t.row.taskType,callback:function(a){e.$set(t.row,"taskType",a)},expression:"scope.row.taskType"}},e._l(e.newTask.type,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):a("span",[e._v("è§†é¢‘æè¿°")])]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.newTaskAddSubmit}},[e._v("å…¨éƒ¨æ·»åŠ ")])],1)],1),e._v(" "),e.page.total>1?a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next,jumper","page-count":e.page.total,"current-page":e.page.now},on:{"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.page,"now",t)},"update:current-page":function(t){return e.$set(e.page,"now",t)}}}):e._e()],1)},staticRenderFns:[]},H=a("C7Lr")(F,W,!1,null,null,null).exports,X={name:"list",data:function(){return{taskData:[],account:this.global.account,loading:!1,userSelect:{dialogVisible:!1,tableData:[],tableSelect:[],type:"user",taskItem:[],loading:!1},page:{now:1,total:1}}},methods:{downloadMultiTask:function(){console.log(this.userSelect.tableSelect[1]),console.log(this.userSelect.tableSelect.length);for(var e=0;e<this.userSelect.tableSelect.length;e++)this.downloadTask(this.userSelect.tableSelect[e])},handleSelectionChange:function(e){this.userSelect.tableSelect=e},editUser:function(e){var t=[!0,"user",e];this.userSelect.dialogVisible=t[0],this.userSelect.type=t[1],this.userSelect.taskItem=t[2]},showList:function(){var e=this;if(0==this.account.group)return!1;this.loading=!0,function(){var e=localStorage.getItem("group"),t=localStorage.getItem("id"),a=Object(s.g)(e);if(1==e||2==e){var i={};return i[a+"Id"]=t,Object(s.e)("/api/"+a+"/taskList",i)}return Object(s.c)("/api/"+a+"/taskList")}(this.account).then(function(t){e.taskData=t.data.taskList?t.data.taskList:t.data}).catch(function(t){console.error(t),e.$message({type:"error",message:"è·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥"})}).then(function(){e.loading=!1})},enterTask:function(e){this.$router.push({path:"/task/"+e.taskId+"/"+e.taskName+"/"+e.taskType})},downloadTask:function(e){var t,a,i=this;3==this.account.group?(this.$message({type:"info",message:"æ­£åœ¨å‡†å¤‡æ•°æ®..."}),(t=e.taskId,a={taskId:t},new Promise(function(e,t){Object(s.d)("/api/admin/downloadDatas",a).then(function(t){console.log(t);var a=new Blob([JSON.stringify(t.d,null,2)],{type:"application/json"});e({blob:a,filename:t.f})}).catch(function(e){t(e)})})).then(function(t){var a=new Date,i=a.getMonth()+1+"",n=a.getDay()+1+"",s=a.getHours()+"",l=a.getSeconds()+"",o=a.getMinutes()+"";i=1==i.length?"0"+i:i,n=1==n.length?"0"+n:n,s=1==s.length?"0"+s:s,o=1==o.length?"0"+o:o,l=1==l.length?"0"+l:l;var r=e.taskName+"_"+a.getFullYear()+"-"+i+"-"+n+"_"+s+"-"+o+"-"+l,c=t.blob,u=document.createElement("a");u.download=r,u.style.display="none",u.href=URL.createObjectURL(c),document.body.appendChild(u),u.click(),document.body.removeChild(u)}).catch(function(e){i.$message({type:"error",message:"æ•°æ®è·å–å¤±è´¥: "+e.message+"("+e.code+")"})})):this.$message({type:"error",message:"æƒé™ä¸è¶³"})},getTypeName:function(e){switch(e){case 1:return"åˆ†ç±»";case 2:return"æ£€æµ‹";case 3:return"åˆ†å‰²";case 4:return"å…³é”®ç‚¹æ£€æµ‹";case 5:return"è§†é¢‘æè¿°";default:return"æœªçŸ¥ç±»å‹"}},filterTag:function(e,t){return t.taskType==e},pageChange:function(e){this.showList()}},mounted:function(){this.showList()}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.editUser}},[e._v("ä¸‹è½½ä»»åŠ¡")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:e.showList}},[e._v("åˆ·æ–°åˆ—è¡¨")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.taskData,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"æ ‡æ³¨äººå‘˜"}},[null!=t.row.users&&0!=t.row.users.length?e._l(t.row.users,function(i){return a("span",{key:i.userId,staticClass:"person"},[e._v("\n                "+e._s(i.username)+"("+e._s(i.labeled)+"/"+e._s(t.row.imageNumber)+")\n              ")])}):a("span",[e._v("æœªæŒ‡æ´¾æ ‡æ³¨äººå‘˜")])],2),e._v(" "),a("el-form-item",{attrs:{label:"å®¡æ ¸äººå‘˜"}},[null!=t.row.reviewers&&0!=t.row.reviewers.length?e._l(t.row.reviewers,function(t){return a("span",{key:t,staticClass:"person"},[e._v("\n                "+e._s(t)+"\n              ")])}):a("span",[e._v("æœªæŒ‡æ´¾å®¡æ ¸äººå‘˜")])],2)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{filters:[{text:"åˆ†ç±»",value:"1"},{text:"æ£€æµ‹",value:"2"},{text:"åˆ†å‰²",value:"3"},{text:"å…³é”®ç‚¹æ£€æµ‹",value:"4"},{text:"è§†é¢‘æè¿°",value:"5"}],"filter-method":e.filterTag,"filter-placement":"bottom-end",prop:"authorities",label:"ç±»å‹",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.getTypeName(t.row.taskType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskName","min-width":"100",label:"åç§°"}}),e._v(" "),a("el-table-column",{attrs:{label:"è¿›åº¦(å·²å®Œæˆå®¡æ ¸æ•°/æ€»å›¾ç‰‡æ•°)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.finish)+"/"+e._s(t.row.imageNumber)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"æ“ä½œ",width:3==e.account.group?220:80},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.enterTask(t.row)}}},[e._v("è¿›å…¥")]),e._v(" "),3==e.account.group?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.downloadTask(t.row)}}},[e._v("ä¸‹è½½å·²å®Œæˆé¡¹")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"user"==e.userSelect.type?"ä¸‹è½½ä»»åŠ¡":"é€‰æ‹©å®¡æ ¸",visible:e.userSelect.dialogVisible,width:"400px"},on:{"update:visible":function(t){return e.$set(e.userSelect,"dialogVisible",t)},open:e.openUserDialog}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.taskData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"join",type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ä»»åŠ¡å",prop:"taskName"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userSelect.dialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.downloadMultiTask}},[e._v("ä¸‹ è½½")])],1)],1)],1)},staticRenderFns:[]};var J=a("C7Lr")(X,K,!1,function(e){a("2gkA")},null,null).exports;i.default.use(n.a);var Y=new n.a({routes:[{path:"/",redirect:"/dashboard"},{path:"/",name:"Index",component:f,props:!0,children:[{path:"dashboard",name:"Dashboard",component:k,props:!0,meta:{title:"ä»ªè¡¨ç›˜ - "+s.b}},{path:"task/:id/:taskName/:type",name:"Task",component:x,props:!0,meta:{title:"ä»»åŠ¡è¯¦æƒ… - "+s.b}},{path:"user",name:"User",component:U,props:!0,meta:{title:"è´¦æˆ·åˆ—è¡¨ - "+s.b}},{path:"partition",name:"Partition",component:H,props:!0,meta:{title:"ä»»åŠ¡æ“ä½œ - "+s.b}},{path:"list",name:"List",component:J,props:!0,meta:{title:"ä»»åŠ¡åˆ—è¡¨ - "+s.b}},{path:"label",name:"Labelset",component:P,props:!0,meta:{title:"æ ‡ç­¾åˆ—è¡¨ - "+s.b}},{path:"videolabel",name:"LabelsetVideo",component:O,props:!0,meta:{title:"è§†é¢‘æ ‡ç­¾åˆ—è¡¨ - "+s.b}}]},{path:"/img/:id/:tid/:type/:taskName/:imagePage",name:"Label",component:T,props:!0,meta:{title:"æ ‡è®° - "+s.b}},{path:"/video/:id/:tid/:taskName/:imagePage",name:"VideoLabel",component:A,props:!0,meta:{title:"è§†é¢‘æ ‡è®° - "+s.b}},{path:"/login/:path",name:"Login",component:m,props:!0,meta:{title:"ç™»å½• - "+s.b}},{path:"/check/:path",name:"Check",component:g,props:!0,meta:{title:"Loading..."}}]}),G=a("bQIR"),Q=a.n(G),Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",[t("router-view")],1)},staticRenderFns:[]};var ee=a("C7Lr")({name:"app",data:function(){return{account:this.global.account}},mounted:function(){-1==this.$route.fullPath.indexOf("/login")&&this.$router.push("/check/"+this.$route.fullPath.replace("/","").replace(/\//g,","))}},Z,!1,function(e){a("0fck")},"data-v-5e5a38d3",null).exports,te={account:{username:"",group:0,token:"",id:0},task:{list:[]}};a("gFLX"),a("J373");i.default.config.productionTip=!1,i.default.use(Q.a),i.default.prototype.global=te,Y.beforeEach(function(e,t,a){e.meta.title&&(document.title=e.meta.title),a()}),console.log(te),new i.default({el:"#app",router:Y,components:{App:ee},template:"<App/>"})},UuF2:function(e,t){},VGDj:function(e,t){},XhWt:function(e,t){},"av3+":function(e,t){},c1um:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"g",function(){return c}),a.d(t,"b",function(){return n}),a.d(t,"f",function(){return r});var i="http://47.95.0.117:8887",n="DIGæ•°æ®æ ‡æ³¨å¹³å°";function s(e,t,a){var n=localStorage.getItem("token"),s={"Content-Type":"/api/login"==e?"application/x-www-form-urlencoded":"application/json"};return"/api/login"!=e&&(s.Authorization="Bearer "+(n||"")),console.log(JSON.stringify(t)),new Promise(function(l,o){fetch(i+e,{method:"POST",credentials:"include",headers:s,body:"/api/login"==e?t:JSON.stringify(t)}).then(function(e){return console.log(e),e.headers.Authorization&&e.headers.Authorization.replace("Bearer ","")!=n&&localStorage.setItem("token",e.headers.Authorization.replace("Bearer ","")),e.json()}).then(function(e){console.log(e),200==e.code||a?l(e):o(e)}).catch(function(e,t){console.log(t),o({code:-1,message:"ç™»é™†å¤±è´¥"})})})}function l(e,t){var a=localStorage.getItem("token"),n={"Content-Type":"application/json"};return n.Authorization="Bearer "+(a||""),new Promise(function(s,l){fetch(i+e,{method:"POST",credentials:"include",headers:n,body:JSON.stringify(t)}).then(function(e){if(e.headers.Authorization&&e.headers.Authorization.replace("Bearer ","")!=a&&localStorage.setItem("token",e.headers.Authorization.replace("Bearer ","")),"application/octet-stream"==e.headers.get("content-type")){e.json().then(function(e){s({f:"",d:e})})}else{e.json().then(function(e){l({code:e.code,message:e.message})})}}).catch(function(e,t){console.log(t),l({code:-1,message:"æœªçŸ¥é”™è¯¯"})})})}function o(e){var t=localStorage.getItem("token");return new Promise(function(a,n){fetch(i+e,{credentials:"include",headers:{Authorization:"Bearer "+(t||"")}}).then(function(e){return e.headers.Authorization&&e.headers.Authorization.replace("Bearer ","")!=t&&localStorage.setItem("token",e.headers.Authorization.replace("Bearer ","")),e.json()}).then(function(e){200==e.code?a(e):n(e)}).catch(function(){n({code:-1,message:"æœªçŸ¥é”™è¯¯"})})})}function r(e){var t=localStorage.getItem("token");return console.log(t),new Promise(function(a,n){fetch(i+e,{credentials:"include",method:"POST",headers:{Authorization:"Bearer "+(t||"")}}).then(function(e){if(e.headers.get("Authorization")&&e.headers.get("Authorization").replace("Bearer ","")!=t&&localStorage.setItem("token",e.headers.get("Authorization").replace("Bearer ","")),302!=e.status&&500!=e.status)return e.json();n()}).then(function(e){500!=e.code?a():n()}).catch(function(){n()})})}function c(e){var t=parseInt(e);return 1==t?"user":3==t?"admin":"reviewer"}},cfRG:function(e,t){},g0hY:function(e,t){},gFLX:function(e,t){},nKMq:function(e,t){},"o+sD":function(e,t){},suMn:function(e,t,a){"use strict";var i=a("c1um");t.a={getVideo:function(e,t){var a=localStorage.getItem("group"),n=Object(i.g)(a),s={videoId:e};return void 0!=t&&(s.userId=t),Object(i.e)("/api/"+n+"/getVideo",s)},getVideoList:function(e,t){var a=localStorage.getItem("group"),n=Object(i.g)(a),s=localStorage.getItem("id"),l={taskId:e,page:t,limit:30};return l[n+"Id"]=s,Object(i.e)("/api/"+n+"/getVideoList",l)},saveVideoLabel:function(e,t,a){var n=localStorage.getItem("group"),s=Object(i.g)(n),l=localStorage.getItem("id"),o={userId:a||l,videoId:e,data:t};return Object(i.e)("/api/"+s+"/saveVideoLabel ",o)},getPendingUserList:function(e){var t=localStorage.getItem("group"),a=Object(i.g)(t);return Object(i.e)("/api/"+a+"/getVideoPendingUserList",{videoId:e})},setVideoFinalVersion:function(e,t){var a=localStorage.getItem("group"),n=Object(i.g)(a);return Object(i.e)("/api/"+n+"/setVideoFinalVersion",{videoId:e,userConfirmId:t})},getLabelList:function(){return Object(i.c)("/api/admin/getVideoLabelList")},deleteLabel:function(e){return Object(i.e)("/api/admin/deleteVideoLabel",{labelId:e})},addLabel:function(e,t,a){return Object(i.e)("/api/admin/addVideoLabel",{type:e,question:t,selector:a})},editLabel:function(e,t,a,n){return Object(i.e)("/api/admin/editVideoLabel",{labelId:e,type:t,question:a,selector:n})}}},tCEz:function(e,t){},vLHs:function(e,t){},w7C3:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f90e8779a907f86eeea1.js.map